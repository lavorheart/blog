!function(doc,win){function templateInfoHTML(a){var b=[];return b.push('<div class="feed-card-a feed-card-clearfix"><div class="feed-card-time"><%= '+a+".timeStr %></div>"),b.push('<div class="feed-card-tags">'),b.push("<% if("+a+".columnInfos) { %>"),b.push('<span class="feed-card-tags-col">'),b.push("<% for(var columnIndex = 0; columnIndex < "+a+".columnInfos.length; columnIndex ++) { %>"),b.push("<% if(FEED_CARD_INFO.enableTagFeed) { %>"),b.push('<a suda-uatrack="key=index_feed&value=news_column_click" href="javascript:;" target="_blank" onclick="__SinaFeedCard__.addTagToTab(\'<%= '+a+'.columnInfos[columnIndex].name %>\'); return false;" title="\u70b9\u51fb\u53ef\u4ee5\u6dfb\u52a0\u6807\u7b7e"><%= '+a+".columnInfos[columnIndex].name %></a>"),b.push("<% } else { %>"),b.push('<a suda-uatrack="key=index_feed&value=news_column_click" href="<%= '+a+'.columnInfos[columnIndex].url %>" target="_blank"><%= '+a+".columnInfos[columnIndex].name %></a>"),b.push("<% } %>"),b.push("</span>"),b.push("<% } %>"),b.push('<span class="feed-card-news-spliter">|</span>'),b.push("<% } %>"),b.push('<span class="feed-card-tags-kw">'),b.push("<% for(var tagi = 0; tagi < "+a+".keywords.length; tagi ++) { %>"),b.push("<% if(FEED_CARD_INFO.enableTagFeed) { %>"),b.push('<a suda-uatrack="key=index_feed&value=news_label_click" href="javascript:;" target="_blank" onclick="__SinaFeedCard__.addTagToTab(\'<%= '+a+'.keywords[tagi] %>\'); return false;" title="\u70b9\u51fb\u53ef\u4ee5\u6dfb\u52a0\u6807\u7b7e"><%= '+a+".keywords[tagi] %></a>"),b.push("<% } else { %>"),b.push('<a suda-uatrack="key=index_feed&value=news_label_click" href="<%= window.FEED_CARD_INFO.tagURL %>/<%= '+a+'.keywords[tagi] %>" target="_blank"><%= '+a+".keywords[tagi] %></a>"),b.push("<% } %>"),b.push("<% } %>"),b.push("</span>"),b.push("</div>"),b.push('<div class="feed-card-actions">'),b.push("<% if("+a+".isAdNews) { %>"),b.push('<a href="<%='+a+".namonitor.zurl%>&url=<%= window.encodeURIComponent("+a+'.zurl) %>" class="feed-card-tg" target="_blank" suda-uatrack="key=index_feed&value=news_tg<%= newsIndex %>">\u8d5e\u52a9</a>'),b.push("<% } %>"),b.push("<% if("+a+".isAdNews && "+a+".namonitor.comment && "+a+".commentid) { %>"),b.push("<% if(FEED_CARD_INFO.enablePageComment) { %>"),b.push('<a href="javascript:;" onclick="__SinaFeedCard__.showComment(this, \'<%='+a+".c_channel%>','<%="+a+".c_id%>','<%="+a+".c_style%>', <%= newsIndex %>, '<%="+a+".comment_show %>', '<%="+a+".url %>', '<%="+a+'.namonitor.comment %>\'); return false;" class="feed-card-comment" suda-uatrack="key=index_feed&value=news_comment_click:<%= newsIndex %>:<%= news._uaTrackValue %>" target="_blank">\u8bc4\u8bba<%= '+a+'.comment_total > 0 ? "(" + '+a+'.comment_total + ")" : "" %></a><span class="feed-card-spliter">|</span>'),b.push("<% } else { %>"),b.push('<a href="<%='+a+".namonitor.comment%>&url=http%3A%2F%2Fcomment5.news.sina.com.cn%2Fcomment%2Fskin%2Fdefault.html%3Fchannel%3D<%= "+a+".c_channel %>%26newsid%3D<%= "+a+".c_id %>%26style%3D<%= "+a+'.c_style %>" class="feed-card-comment" suda-uatrack="key=index_feed&value=news_comment_click:<%= newsIndex %>:<%= news._uaTrackValue %>" target="_blank">\u8bc4\u8bba<%= '+a+'.comment_total > 0 ? "(" + '+a+'.comment_total + ")" : "" %></a><span class="feed-card-spliter">|</span>'),b.push("<% } %>"),b.push("<% } else { %>"),b.push("<% if("+a+".categoryid == 4) { %>"),b.push('<a href="<%='+a+'.url %>?tj=1#commonComment" article-type="blog" blog-id="<%='+a+'.docid.replace("blog:","")%>" class="feed-card-comment" suda-uatrack="key=index_feed&value=news_comment_click:<%= newsIndex %>:<%= news._uaTrackValue %>" target="_blank">\u8bc4\u8bba</a><span class="feed-card-spliter">|</span>'),b.push("<% } else if("+a+".c_channel) { %>"),b.push("<% if(FEED_CARD_INFO.enablePageComment) { %>"),b.push('<a href="javascript:;" onclick="__SinaFeedCard__.showComment(this, \'<%='+a+".c_channel%>','<%="+a+".c_id%>','<%="+a+".c_style%>', <%= newsIndex %>, '<%="+a+".comment_show %>', '<%="+a+'.url %>\'); return false;" class="feed-card-comment" suda-uatrack="key=index_feed&value=news_comment_click:<%= newsIndex %>:<%= news._uaTrackValue %>" target="_blank">\u8bc4\u8bba<%= '+a+'.comment_total > 0 ? "(" + '+a+'.comment_total + ")" : "" %></a><span class="feed-card-spliter">|</span>'),b.push("<% } else { %>"),b.push('<a href="http://comment5.news.sina.com.cn/comment/skin/default.html?channel=<%= '+a+".c_channel %>&newsid=<%= "+a+".c_id %>&style=<%= "+a+'.c_style %>" class="feed-card-comment" suda-uatrack="key=index_feed&value=news_comment_click:<%= newsIndex %>:<%= news._uaTrackValue %>" target="_blank">\u8bc4\u8bba<%= '+a+'.comment_total > 0 ? "(" + '+a+'.comment_total + ")" : "" %></a><span class="feed-card-spliter">|</span>'),b.push("<% } %>"),b.push("<% } %>"),b.push("<% } %>"),b.push('<span id="bdshare" class="bdshare_t bds_tools get-codes-bdshare feed-card-share" data="'),b.push("<% if(news.docid) { %>"),b.push("text:'<%= "+a+".title %>',url:'<%= \"\" + "+a+".url %>'"),b.push("<% } else { %>"),b.push("text:'<%= "+a+".title %>',url:'<%= "+a+".url %>'"),b.push("<% } %>"),b.push("<% if("+a+".templateid == 0 && "+a+".img && "+a+".img.u) { %>"),b.push(",pic:'<%= "+a+".img.u %>'"),b.push("<% } %>"),b.push("<% if("+a+".templateid == 1 && "+a+".images && "+a+".images.length) { %>"),b.push(",pic:'<%= "+a+".images[0].u %>'"),b.push("<% } %>"),b.push('"><span class="bds_more">\u5206\u4eab</span></span>'),b.push("</div>"),b.push("</div>"),b.push('<div style="display:none; margin-top:10px;" class="feed-card-comment-w" data-id="feedCardComment_<%= '+a+'.c_id %>_w">'),b.push('<div class="feed-card-comment-top" data-id="feedCardCommentTop_<%= '+a+'.c_id %>"><em>\u25c6</em><span>\u25c6</span></div>'),b.push('<div class="feed-card-comment-c" data-id="feedCardComment_<%= '+a+'.c_id %>_c"></div>'),b.push('<a href="javascript:;" class="feed-card-comment-close" onclick="__SinaFeedCard__.hideComment(this, \'<%='+a+".c_id %>'); return false;\"><span>\u2571\u2572</span> \u6536\u8d77</a>"),b.push("</div>"),b=b.join("")}var templateSettings={evaluate:/\<\%([\s\S]+?)\%\>/g,interpolate:/\<\%=([\s\S]+?)\%\>/g,varname:"it"},utils={};!function(utils){function encodeFormData(a){var b,c=[],d=/%20/g;for(var e in a)b=a[e].toString(),c.push(win.encodeURIComponent(e).replace(d,"+")+"="+win.encodeURIComponent(b).replace(d,"+"));return c.join("&")}function isFunction(a){return"[object Function]"===toString.call(a)}function getJSON(str){return"[object String]"===toString.call(str)?str?win.JSON?win.JSON.parse(str):eval("("+str+")"):null:str}function readableDate(a){var b,c,d,e,f,g=new Date(1e3*a),h=new Date,i=h-g,j=36e5;return j>i?f=0==Math.ceil(i/6e4)?"\u521a\u521a":Math.ceil(i/6e4).toString()+"\u5206\u949f\u524d":(b=g.getHours(),c=g.getMinutes(),d=10>b?"0"+b.toString():b.toString(),e=10>c?"0"+c.toString():c.toString(),f=h.getFullYear()===g.getFullYear()?h.getMonth()===g.getMonth()&&h.getDate()===g.getDate()?"\u4eca\u5929"+d+":"+e:(g.getMonth()+1).toString()+"\u6708"+g.getDate().toString()+"\u65e5 "+d+":"+e:g.getFullYear().toString()+"\u5e74 "+(g.getMonth()+1).toString()+"\u6708"+g.getDate().toString()+"\u65e5 "+d+":"+e),f}function fillOptions(a,b){for(var c in b)a[c]=b[c]}function fillOptionsWithDefault(a,b,c){fillOptions(a,c),fillOptions(a,b)}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function safeStr(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getPosition(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b}function getMousePos(a){return"pageX"in a?{x:a.pageX,y:a.pageY}:{x:Math.max(document.body.scrollTop,document.documentElement.scrollTop)+a.clientX,y:Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)+a.clientY}}function cn_size(a,b){b=b||!1;for(var c=a.length,d=0,e=0;c>e;e++)d+=a.charCodeAt(e)<27||a.charCodeAt(e)>126?2:1;return b?d:Math.ceil(d/2)}var toString=Object.prototype.toString,viewData=function(){var a=0,b=0,c=0,d=0,e=0,f=0,g=window,h=document,i=h.documentElement;return a=i.clientWidth||h.body.clientWidth||0,b=g.innerHeight||i.clientHeight||h.body.clientHeight||0,d=h.body.scrollTop||i.scrollTop||g.pageYOffset||0,c=h.body.scrollLeft||i.scrollLeft||g.pageXOffset||0,e=Math.max(h.body.scrollWidth,i.scrollWidth||0),f=Math.max(h.body.scrollHeight,i.scrollHeight||0,b),{scrollTop:d,scrollLeft:c,documentWidth:e,documentHeight:f,viewWidth:a,viewHeight:b}},APIndexOf=Array.prototype.indexOf,indexOf=function(){return APIndexOf?function(a,b){return APIndexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}}(),timeoutHandle=function(){var a=[],b=0,c={success:function(b){var c=a[b];c&&(c.isSuccess=!0,clearTimeout(c.timer))},timeout:function(b,c){var d=a[b];d&&(d.timer=setTimeout(function(){d.isSuccess||"function"==typeof c&&c.call(this)},d.time))}};return function(d,e){b++,a[b]={},a[b].time=e||5e3,a[b].isSuccess=!1,"function"==typeof d&&d.call(this,b,c)}}(),reIE=/MSIE\s([^;]*)/,browser={ie:0,loaded:!1};!function(a){function b(a){var b=0;return parseFloat(a.replace(/\./g,function(){return b++,1===b?".":""}))}var c=navigator&&navigator.userAgent||"",d=c.match(reIE);d&&d[1]&&(a.ie=b(d[1]))}(browser);var isTouch="ontouchstart"in win;utils.isTouch=isTouch,utils.downEvent=isTouch?"touchstart":"mousedown",utils.upEvent=isTouch?"touchend":"mouseup",utils.moveEvent=isTouch?"touchmove":"mousemove",utils.getMousePos=getMousePos,utils.getPosition=getPosition,utils.encodeFormData=encodeFormData,utils.isFunction=isFunction,utils.getJSON=getJSON,utils.viewData=viewData,utils.readableDate=readableDate,utils.fillOptions=fillOptions,utils.fillOptionsWithDefault=fillOptionsWithDefault,utils.safeStr=safeStr,utils.trim=trim,utils.cn_size=cn_size,utils.indexOf=indexOf,utils.browser=browser,utils.timeoutHandle=timeoutHandle}(utils);var storage=function(){var a=win.localStorage;return a?{getItem:function(b){return a.getItem(b)},setItem:function(b,c){a.removeItem(b),a.setItem(b,c)},removeItem:function(b){a.removeItem(b)}}:{getItem:function(a){var b=a+"=",c="";if(doc.cookie.length>0){var d=doc.cookie.indexOf(b);if(-1!=d){d+=b.length;var e=doc.cookie.indexOf(";",d);-1==e&&(e=doc.cookie.length),c=win.decodeURIComponent(doc.cookie.substring(d,e))}}return c},setItem:function(a,b){var c=new Date;c.setFullYear(c.getFullYear()+1),doc.cookie=a+"="+win.encodeURIComponent(b)+"; expires="+c.toGMTString()+";"},removeItem:function(a){var b=new Date;b.setFullYear(b.getFullYear()-1),doc.cookie=a+"=0; expires="+b.toGMTString()}}}(),IO=function(){function a(a,b){var c=[],d=/%20/g;for(var e in a){var f=a[e].toString();b?c.push(e+"="+f):c.push(win.encodeURIComponent(e).replace(d,"+")+"="+win.encodeURIComponent(f).replace(d,"+"))}return c.join("&")}function b(a){a.onload=a.onreadystatechange=function(){h.test(a.readyState)&&(a.onload=a.onreadystatechange=null,f.removeChild(a),a=null)}}function c(a,c){var d=doc.createElement("script");d.src=a,d.async=!0,d.charset=c?c:"utf-8",b(d),g?f.insertBefore(d,g):f.appendChild(d)}function d(b,f){var g=b.jsonpKey||"callback",h=b.jsonpValue||"jsonpCallback_"+d.count,i=g+"="+h;e=b.uuid||(new Date).getTime(),win[h]=function(a){b.onsuccess(a,e)};var j=b.url.indexOf("?")>0?"&":"?";c(b.url+j+a(b.data,f)+"&"+i+"&_="+(new Date).getTime(),b.encode),d.count++}var e,f=doc.getElementsByTagName("head")[0]||doc.documentElement,g=doc.getElementsByTagName("base")[0],h=/^(?:loaded|complete|undefined)$/;d.count=1;var i=function(a,b,c){var d=doc.createElement("script"),e=!1;d.charset=b?b:"utf-8",d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,d.onload=d.onreadystatechange=null,"function"==typeof c&&c())},d.src=a,g?f.insertBefore(d,g):f.appendChild(d)};return{jsonp:d,jsLoad:i}}(),dom={$:function(a){return doc.getElementById(a)}};!function(){function a(a){a=k(a),a.preventDefault?a.preventDefault():a.returnValue=!1}function b(a){a=k(a),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}var c=!!doc.querySelectorAll,d=!!doc.body.classList,e=c?function(a,b){return a||(a=doc.body),a.querySelectorAll("."+b)}:function(a,b){a||(a=doc.body);for(var c=(a.getElementsByTagName("*"),[]),d=0,e=ele.length;e>d;d++)g(ele[d],b)&&c.push(ele[d]);return c};dom.getByClassName=e;var f=c?function(a,b,c,d){a||(a=doc.body);var e=d||"*";return a.querySelectorAll(e+"["+b+'="'+c+'"]')}:function(a,b,c,d){a||(a=doc.body);for(var e=d||"*",f=a.getElementsByTagName(e),g=[],h=0,i=f.length;i>h;h++)f[h].getAttribute(b)==c&&g.push(f[h]);return g};dom.getByAttributeName=f;var g=d?function(a,b){return a.classList.contains(b)}:function(a,b){return b=" "+b+" ",a&&1===a.nodeType&&(" "+a.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(b)>=0?!0:!1},h=d?function(a,b){a.classList.remove(b)}:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")},i=d?function(a,b){g(a,b)||a.classList.add(b)}:function(a,b){g(a,b)||(a.className+=" "+b)},j=doc.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},k=function(a){return a?a:win.event},l=function(a){return a=k(a),a.target||a.srcElement};dom.addClass=i,dom.hasClass=g,dom.removeClass=h,dom.addEvent=j,dom.getEvent=k,dom.getTarget=l,dom.preventDefault=a,dom.stopPropagation=b,dom.getByAttributeName=f}();var FEED_TEMPLATE={ICON:"feed-card-icon ",IMG_ICON:"feed-card-icon-img ",RECO_ICON:"feed-card-icon-reco ",VIDEO_ICON:"feed-card-icon-video ",QAQ:"feed-card-icon-qaq ",BBS:"feed-card-icon-bbs ",VOTE:"feed-card-icon-vote ",SCORE:"feed-card-icon-score ",HOT:"feed-card-icon-hot "},IMAGE_DIV_HTML='<div class="feed-card-img" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">',feedTemplateTrack={urlTrack:' suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>" ',videoTrack:' suda-uatrack="key=index_feed&value=video_play:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>" ',closeVideoTrack:' suda-uatrack="key=index_feed&value=close_video_play:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>" '},feedTemplate0=function(){var a=["<% if(!news.img && news.isAdNews && !(news.categoryid == 3 || news.hasVideo == 1)) { %>"];a.push('<a class="feed-card-wb-ad-url" href="<%= news.weibourl %>" target="_blank"><%= news.weiboname %></a>'),a.push("<% } %>"),a=a.join("");var b=["<% switch(news.templateid) { case 0: %>"],c='<% if(news.images && news.images.length > 1) { %><i class="feed-card-icon feed-card-icon-picAlbum"><%= news.images.length %></i><% } %>';return b.push('<% if(news.categoryid === "4"){ %>'),b.push(['<div class="feed-card-item-hd">','<span class="feed-card-item-head">','<a href="http://blog.sina.com.cn/u/<%=news.authoruid %>" target="_blank"><img src="http://portrait2.sinaimg.cn/<%=news.authoruid %>/blog/50" width="50px" height="50px" alt="<%= news.author %>" title="<%= news.author %>"></a>',"</span>",'<span class="feed-card-item-name"><a href="http://blog.sina.com.cn/u/<%=news.authoruid %>" target="_blank" class="feeds_uname"><%= news.author %></a><i></i></span>',"<h2"+feedTemplateTrack.urlTrack+' class="<%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %>',c,"</a>"+a+"</h2>","</div>"].join("")),b.push("<% }else{ %>"),b.push("<% if(news.isCreNews) { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.RECO_ICON+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),b.push("<% } else if(news.comment_total > __FEED_CARD_HOT_COUNT) { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.HOT+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a>'+a+"</h2>"),b.push("<% } else if (news.categoryid == 3 || news.hasVideo == 1) { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.VIDEO_ICON+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),b.push("<% } else { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+' class="<%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a>'+a+"</h2>"),b.push("<% } %>"),b.push("<% } %>"),b.push('<% if(news.img && news.img.u&&news.categoryid !== "4") { %>'),b.push('<div class="feed-card-c feed-card-c1 feed-card-clearfix" id="videoPlayerC-<%= news._uuid %>">'),b.push(IMAGE_DIV_HTML),b.push("<% if(news.categoryid == 3 || news.hasVideo == 1) { %>"),b.push("<% if(news.video_id != 0) { %>"),b.push('<% if(it.cardSetting.videoPlayType&&it.cardSetting.videoPlayType==="external"){%>'),b.push('<a href="<%= news.url %>"'+feedTemplateTrack.videoTrack+'target="_blank" ><img src="<%= news.img.u %>" alt="<%= news.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% }else{ %>"),b.push('<a href="javascript:;"'+feedTemplateTrack.videoTrack+'target="_blank" onclick="__SinaFeedCard__.playVideo(\'<%= news._uuid %>\', <%= news.video_id %>, <%= news.channelid %>); return false;"><img src="<%= news.img.u %>" alt="<%= news.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push("<% } else { %>"),b.push('<a href="<%= news.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= news.img.u %>" alt="<%= news.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push('<i class="feed-card-icon feed-card-icon-svideo"></i>'),b.push("<% } else { %>"),b.push('<a href="<%= news.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= news.img.u %>" alt="<%= news.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push("</a>"),b.push("</div>"),b.push('<div class="feed-card-txt">'),b.push('<a href="<%= news.url %>" class="feed-card-txt-summary" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank"><%= news.intro %></a>'),b.push('<a href="<%= news.url %>" class="feed-card-txt-detail" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank">[\u8be6\u7ec6]</a>'),b.push("</div>"),b.push("<% if(FEED_CARD_INFO.enableHotComment && news.rcomment) { %>"),b.push('<div class="feed-card-hotc">'),b.push('<a class="photo" href="http://weibo.com/u/<%= news.rcomment.uid %>" target="_blank"><img src="http://tp3.sinaimg.cn/<%= news.rcomment.uid %>/50/5661682855/1" /></a>'),b.push('<a class="name" href="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=<%= news.rcomment.uid %>" target="_blank" title="<%= news.rcomment.nickname %>"><%= news.rcomment.nickname.length > 4 ? news.rcomment.nickname.substring(0, 4) + "...": news.rcomment.nickname %></a>&nbsp;:'),b.push('<a class="c" href="http://comment5.news.sina.com.cn/comment/skin/default.html?channel=<%= news.c_channel %>&newsid=<%= news.c_id %>&style=<%= news.c_style %>" target="_blank"><%= news.rcomment.content %></a>'),b.push("</div>"),b.push("<% } else if(news.weibourl) { %>"),b.push('<div class="feed-card-wb"><a href="<%= news.weibourl %>" target="_blank"><%= news.weiboname %></a></div>'),b.push("<% } %>"),b.push("</div>"),b.push("<% } else if(news.intro) { %>"),b.push('<div class="feed-card-c"><div class="feed-card-txt">'),b.push('<a href="<%= news.url %>" class="feed-card-txt-summary" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank"><%= news.intro %></a>'),b.push('<a href="<%= news.url %>" class="feed-card-txt-detail" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank">[\u8be6\u7ec6]</a>'),b.push("</div>"),b.push('<% if(news.categoryid === "4"&&news.images&&news.images.length>0){ %>'),b.push('<div class="feed-card-picAlbum feed-card-clearfix">'),b.push("<% for(var albumIndex = 0; news.images && albumIndex < news.images.length; albumIndex ++ ) { var newsAlbumItem = news.images[albumIndex];%>"),b.push('<a href="<%= news.url %>" target="_blank" class="feed-card-picAlbum-i"'+feedTemplateTrack.urlTrack+'><img height="143" alt="<%= news.title %>" src="<%= newsAlbumItem.u %>"></a>'),b.push("<% } %>"),b.push("</div>"),b.push("<% } %>"),b.push("<% if(FEED_CARD_INFO.enableHotComment && news.rcomment) { %>"),b.push('<div class="feed-card-hotc">'),b.push('<a class="photo" href="http://weibo.com/u/<%= news.rcomment.uid %>" target="_blank"><img src="http://tp3.sinaimg.cn/<%= news.rcomment.uid %>/50/5661682855/1" /></a>'),b.push('<a class="name" href="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=<%= news.rcomment.uid %>" target="_blank" title="<%= news.rcomment.nickname %>"><%= news.rcomment.nickname.length > 4 ? news.rcomment.nickname.substring(0, 4) + "...": news.rcomment.nickname %></a>&nbsp;:'),b.push('<a class="c" href="http://comment5.news.sina.com.cn/comment/skin/default.html?channel=<%= news.c_channel %>&newsid=<%= news.c_id %>&style=<%= news.c_style %>" target="_blank"><%= news.rcomment.content %></a>'),b.push("</div>"),b.push("<% } %>"),b.push("</div>"),b.push("<% } %>"),b.push("<% if((news.categoryid == 3 || news.hasVideo == 1) && news.vid != 0) { %>"),b.push('<div class="feed-card-video-player-w" style="display:none;" id="videoPlayerV-<%= news._uuid %>">'),b.push('<div class="feed-card-video-player-close"'+feedTemplateTrack.closeVideoTrack+"onclick=\"__SinaFeedCard__.stopVideo('<%= news._uuid %>');\">\u6536\u8d77\u89c6\u9891</div>"),b.push('<div class="feed-card-video-player-c">'),b.push('<div class="feed-card-video-player" id="videoPlayerVC-<%= news._uuid %>"></div>'),b.push("</div>"),b.push("</div>"),b.push("<% } %>"),b.push(templateInfoHTML("news")),b.push("<% break; %>"),b.join("")}(),feedTemplate1=function(){var a=["<% if(news.isAdNews) { %>"];a.push('<a class="feed-card-wb-ad-url" href="<%= news.weibourl %>" target="_blank"><%= news.weiboname %></a>'),a.push("<% } %>"),a=a.join("");var b='<% if(news.imageCount && news.imageCount > 1) { %><i class="feed-card-icon feed-card-icon-picAlbum"><%= news.imageCount %></i><% } %>',c=["<% case 1: %>"];return c.push("<% if(news.isCreNews) { %>"),c.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.RECO_ICON+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %>'+b+"</a>"+a+"</h2>"),c.push("<% } else { %>"),c.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.IMG_ICON+'"><a href="<%= news.url %>" target="_blank"><%= news.title %>'+b+"</a>"+a+"</h2>"),c.push("<% } %>"),c.push('<div class="feed-card-c"><div class="feed-card-picAlbum feed-card-clearfix">'),c.push("<% for(var albumIndex = 0; news.images && albumIndex < news.images.length; albumIndex ++ ) { var newsAlbumItem = news.images[albumIndex];%>"),c.push('<a href="<%= news.url %>" target="_blank" class="feed-card-picAlbum-i"'+feedTemplateTrack.urlTrack+'><img height="143" alt="<%= news.title %>" src="<%= newsAlbumItem.u %>"></a>'),c.push("<% } %>"),c.push("</div></div>"),c.push(templateInfoHTML("news")),c.push("<% break; %>"),c.join("")}(),feedTemplate2=function(){var a=[];a.push("<% if(creItem.uids && creItem.uids.length) { %>"),a.push('<div class="feed-card-share-users feed-card-clearfix">'),a.push("<% for(var i3 = 0; i3 < creItem.uids.length; i3 ++) { %>"),a.push('<a href="http://weibo.com/u/<%= creItem.uids[i3] %>" target="_blank" data-uid="<%= creItem.uids[i3] %>" class="feed-card-share-user">'),a.push("<%= creItem.uids[i3] %>"),a.push("</a>"),a.push("<% } %>"),a.push('<span class="feed-card-share-num"><%= creItem.weiboCount > 2 ? "\u7b49" + creItem.weiboCount + "\u4f4d\u597d\u53cb" : "" %>\u4e5f\u5173\u6ce8</span>'),a.push("</div>"),a.push("<% } else { %>"),a.push('<div class="feed-card-share-users feed-card-clearfix feed-card-wb">'),a.push('<span class="feed-card-share-num"><a href="http://weibo.com" target="_blank"></a><%= creItem.weiboCount %>\u4eba\u4e5f\u5173\u6ce8</span>'),a.push("</div>"),a.push("<% } %>"),a=a.join("");var b=["<% case 2: %>"];return b.push('<div class="feed-card-c2">'),b.push('<div class="feed-card-scroll-w" data-id="feedCardListScrollNews">'),b.push("<% for(var i2 = 0; i2 < news.sub.length; i2 ++ ) { var creItem = news.sub[i2]; %>"),b.push("<% var videoIdAttr = ''; %>"),b.push("<% if(creItem.video_id&&creItem.video_id != 0){ %>"),b.push("<% videoIdAttr = ' video-ctime=\"'+creItem._uuid+'\"'; %>"),b.push("<% } %>"),b.push('<div class="feed-card-scroll-i" style="display:none;"<%= videoIdAttr %>>'),b.push('<h2 suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>:<%= i2 %>"  class="feed-card-icon feed-card-icon-wb <%= news.iconClass %>"><a href="<%= creItem.url %>" target="_blank"><%= creItem.title %></a></h2>'),b.push("<% if(creItem.categoryid=='2'&&creItem.images && creItem.images.length>0) { %>"),b.push('<div class="feed-card-c"><div class="feed-card-picAlbum feed-card-clearfix">'),b.push("<% for(var albumIndex = 0; creItem.images && albumIndex < creItem.images.length; albumIndex ++ ) { var newsAlbumItem = creItem.images[albumIndex];%>"),b.push('<a href="<%= creItem.url %>" target="_blank" class="feed-card-picAlbum-i"'+feedTemplateTrack.urlTrack+'><img height="143" alt="<%= creItem.title %>" src="<%= newsAlbumItem.u %>"></a>'),b.push("<% } %>"),b.push("</div>"),b.push(a),b.push("</div>"),b.push("<% } else if(creItem.img && creItem.img.u) { %>"),b.push('<div class="feed-card-c feed-card-c1 feed-card-clearfix">'),b.push('<div id="videoPlayerC-<%= creItem._uuid %>">'),b.push(IMAGE_DIV_HTML),b.push("<% if(creItem.categoryid == 3 || creItem.hasVideo == 1) { %>"),b.push("<% if(creItem.video_id&&creItem.video_id != 0) { %>"),b.push('<% if(it.cardSetting.videoPlayType&&it.cardSetting.videoPlayType==="external"){%>'),b.push('<a href="<%= creItem.url %>"'+feedTemplateTrack.videoTrack+'target="_blank" ><img src="<%= creItem.img.u %>" alt="<%= creItem.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% }else{ %>"),b.push('<a href="javascript:;"'+feedTemplateTrack.videoTrack+'target="_blank" onclick="__SinaFeedCard__.playVideo(\'<%= creItem._uuid %>\', <%= creItem.video_id %>, <%= creItem.channelid %>); return false;"><img src="<%= creItem.img.u %>" alt="<%= creItem.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push("<% } else { %>"),b.push('<a href="<%= creItem.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= creItem.img.u %>" alt="<%= creItem.title %>" style="width:<%= creItem.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push('<i class="feed-card-icon feed-card-icon-svideo"></i>'),b.push("<% } else { %>"),b.push('<a href="<%= creItem.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= creItem.img.u %>" alt="<%= creItem.title %>" style="width:<%= __SinaFeedCard__cardImageParam.w + "px" %>; height:<%= __SinaFeedCard__cardImageParam.h + "px" %>;">'),b.push("<% } %>"),b.push("</a>"),b.push("</div>"),b.push('<div class="feed-card-txt">'),b.push('<a href="<%= creItem.url %>" class="feed-card-txt-summary" rel="nofollow" suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>:i2" target="_blank"><%= creItem.intro%></a><a href="<%= creItem.url %>" target="_blank" class="feed-card-txt-detail" suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>:i2" rel="nofollow">[\u8be6\u7ec6]</a>'),b.push("</div>"),b.push(a),b.push("</div>"),b.push("<% if((creItem.categoryid == 3 || creItem.hasVideo == 1) && creItem.vid != 0) { %>"),b.push('<div class="feed-card-video-player-w" style="display:none;" id="videoPlayerV-<%= creItem._uuid %>">'),b.push('<div class="feed-card-video-player-close"'+feedTemplateTrack.closeVideoTrack+"onclick=\"__SinaFeedCard__.stopVideo('<%= creItem._uuid %>');\">\u6536\u8d77\u89c6\u9891</div>"),b.push('<div class="feed-card-video-player-c">'),b.push('<div class="feed-card-video-player" id="videoPlayerVC-<%= creItem._uuid %>"></div>'),b.push("</div>"),b.push("</div>"),b.push("<% } %>"),b.push("</div>"),b.push("<% } else if(creItem.intro){ %>"),b.push('<div class="feed-card-c"><div class="feed-card-txt">'),b.push('<a href="<%= creItem.url %>" class="feed-card-txt-summary" rel="nofollow" suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>:i2" target="_blank"><%= creItem.intro %></a><a href="<%= creItem.url %>" class="feed-card-txt-detail" suda-uatrack="key=index_feed&value=news_click:<%= news.lid %>:<%= newsIndex + it.fromCount %>:<%= news._uaTrackValue %>:i2" target="_blank" rel="nofollow">[\u8be6\u7ec6]</a>'),b.push("</div>"),b.push(a),b.push("</div>"),b.push("<% } %>"),b.push(templateInfoHTML("creItem")),b.push("</div>"),b.push("<% } %>"),b.push("</div>"),b.push('<div class="feed-card-scroll-page">'),b.push('<span class="feed-card-scroll-num" data-id="feedCardListScrollNewsNum">1/<%= news.sub.length %></span><a href="javascript:;" class="feed-card-scroll-prev feed-card-icon" data-id="feedCardListScrollNewsPrev" suda-uatrack="key=index_feed&value=sns_prev">Prev</a><a href="javascript:;" class="feed-card-scroll-next feed-card-icon" data-id="feedCardListScrollNewsNext" suda-uatrack="key=index_feed&value=sns_next">Next</a>'),b.push("</div>"),b.push("</div>"),b.push("<% break; %>"),b.join("")}(),feedTemplate3=function(){var a=["<% case 3: %>"];return a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.QAQ+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push('<div class="feed-card-c feed-card-c-qa feed-card-clearfix">'),a.push('<div class="feed-card-icon feed-card-icon-qaa"></div>'),a.push('<a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' class="feed-card-qaa-a"><%= news.answer %></a>'),a.push("</div>"),a.push('<div class="feed-card-a feed-card-a-qa">'),a.push('<span><%= news.keywords.join(",") %></span>'),a.push('<span class="feed-card-news-spliter">|</span>'),a.push('<span class="feed-card-news-label">\u4e13\u5bb6:</span>'),a.push("<span><%= news.nick %></span>"),a.push("</div>"),a.push("<% break; %>"),a.join("")}(),feedTemplate4=function(){var a=["<% case 4: %>"];return a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.BBS+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push('<div class="feed-card-c"><div class="feed-card-txt"><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' class="feed-card-c-bbs-a">'),a.push("<%= news.summary %></a>"),a.push("</div></div>"),a.push('<div class="feed-card-a">'),a.push('<div class="feed-card-time"><%= news.timeStr %></div>'),a.push('<div class="feed-card-bbs-info">'),a.push('<span class="feed-card-news-label">\u53d1\u5e16\u4eba:</span>'),a.push("<%= news.author %>"),a.push("</div>"),a.push("</div>"),a.push("<% break; %>"),a.join("")}(),feedTemplate5_6=function(){var a=["<% if(news.isAdNews) { %>"];a.push('<a class="feed-card-wb-ad-url" href="<%= news.weibourl %>" target="_blank"><%= news.weiboname %></a>'),a.push("<% } %>"),a=a.join("");var b=["<% case 5: case 6: %>"];return b.push("<% if(news.templateid == 5) { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.VOTE+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a>'+a+"</h2>"),b.push("<% } else { %>"),b.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.SCORE+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),
b.push("<% } %>"),b.push('<div class="feed-card-c feed-card-c1 feed-card-clearfix">'),b.push(IMAGE_DIV_HTML),b.push('<a href="<%= news.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= news.img %>" alt="<%= news.title %>">'),b.push("</a>"),b.push("</div>"),b.push('<div class="feed-card-txt">'),b.push('<a href="<%= news.url %>" class="feed-card-txt-summary" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank"><%= news.intro %></a>'),b.push('<a href="<%= news.url %>" class="feed-card-txt-detail" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank">[\u8be6\u7ec6]</a>'),b.push("</div>"),b.push("<% if(news.templateid == 5) { %>"),b.push('<div class="feed-card-do-vote"><a href="<%= news.url %>" target="_blank">\u5f00\u59cb\u6295\u7968</a></div>'),b.push("<% } else { %>"),b.push('<div class="feed-card-do-score"><a href="<%= news.url %>" target="_blank">\u5f00\u59cb\u6253\u5206</a></div>'),b.push("<% } %>"),b.push("</div>"),b.push(templateInfoHTML("news")),b.push("<% break; %>"),b.join("")}(),feedTemplate7=function(){var a=["<% case 7: %>"];return a.push("<% if(news.comment_total > __FEED_CARD_HOT_COUNT) { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.HOT+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } %>"),a.push('<div class="feed-card-c" data-id="news-<%= news.mid %>">'),a.push("</div>"),a.push("<% break; %>"),a.join("")}(),feedTemplate16=function(){var a=["<% case 16: %>"];return a.push("<% if(news.comment_total > __FEED_CARD_HOT_COUNT) { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.HOT+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } %>"),a.push('<div class="feed-card-c feed-card-c16 feed-card-clearfix" data-id="news-<%= news.mid %>">'),a.push('<div class="feed-card-img">'),a.push('<a href="<%= news.url %>"'+feedTemplateTrack.urlTrack+'target="_blank"><img src="<%= news.img %>" alt="<%= news.title %>">'),a.push("</a>"),a.push("</div>"),a.push('<div class="feed-card-txt">'),a.push('<a href="<%= news.url %>" class="feed-card-txt-summary" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank"><%= news.intro %></a>'),a.push('<a href="<%= news.url %>" class="feed-card-txt-detail" rel="nofollow"'+feedTemplateTrack.urlTrack+'target="_blank">[\u8be6\u7ec6]</a>'),a.push("</div>"),a.push("</div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplate101=function(){var a=["<% case 101: %>"];return a.push("<% if(news.comment_total > __FEED_CARD_HOT_COUNT) { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.HOT+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } %>"),a.push('<div class="feed-card-c"><div class="feed-card-photos feed-card-clearfix">'),a.push("<% for(var subIndex = 0; subIndex < news.sub.length; subIndex ++ ) { var subItem = news.sub[subIndex];%>"),a.push('<div class="feed-card-photo <%= subIndex == news.sub.length - 1 ? "last-feed-card-photo" : "" %>"><a href="<%= subItem.url %>" target="_blank" class="img"'+feedTemplateTrack.urlTrack+'><img src="<%= subItem.img %>">'),a.push("<% if(subItem.categoryid == 2) { %>"),a.push('<i class="feed-card-icon feed-card-icon-picAlbum"><%= subItem.images ? (subItem.images.length > 1 ? subItem.images.length : "") : "" %></i>'),a.push("<% } else if(subItem.categoryid == 3) { %>"),a.push('<i class="feed-card-icon feed-card-icon-svideo"></i>'),a.push("<% } %>"),a.push('</a><a href="<%= subItem.url %>"'+feedTemplateTrack.urlTrack+' target="_blank"><%= subItem.title %></a></div>'),a.push("<% } %>"),a.push("</div></div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplate102=function(){var a=["<% case 102: %>"];return a.push("<% if(news.comment_total > __FEED_CARD_HOT_COUNT) { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.HOT+' <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'class="'+FEED_TEMPLATE.ICON+FEED_TEMPLATE.VIDEO_ICON+'"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } %>"),a.push('<div class="feed-card-c"><div class="feed-card-videos feed-card-clearfix">'),a.push("<% for(var subIndex = 0; subIndex < news.sub.length; subIndex ++ ) { var subItem = news.sub[subIndex];%>"),a.push('<div class="feed-card-video <%= subIndex == news.sub.length - 1 ? "last-feed-card-video" : "" %>"><a href="<%= subItem.url %>" target="_blank" class="img"'+feedTemplateTrack.urlTrack+'><img src="<%= subItem.img %>"><i class="feed-card-icon feed-card-icon-svideo"></i></a>'),a.push('<a href="<%= subItem.url %>" target="_blank"'+feedTemplateTrack.urlTrack+"><%= subItem.title %></a></div>"),a.push("<% } %>"),a.push("</div></div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplate103_104=function(){var a=["<% case 103: case 104: %>"];return a.push("<h2"+feedTemplateTrack.urlTrack+' class="<%= news.templateid == 103 ? "feed-card-icon feed-card-icon-topic" : "" %> <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push('<div class="feed-card-c feed-card-clearfix">'),a.push('<div class="feed-card-topic-img"><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+'><img src="<%= news.img %>"></a></div>'),a.push('<div class="feed-card-topic-txt"><p><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' rel="nofollow"><%= news.summary %></a><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' rel="nofollow">[\u8be6\u7ec6]</a>'),a.push("<% if(news.isAdNews) { %>"),a.push('<br /><a class="feed-card-wb-ad-url" href="<%= news.weibourl %>" target="_blank"><%= news.weiboname %></a>'),a.push("<% } %>"),a.push("</p>"),a.push('<div class="feed-card-topics feed-card-clearfix">'),a.push("<% for(var subIndex = 0; subIndex < news.sub.length; subIndex ++ ) { var subItem = news.sub[subIndex];%>"),a.push('<div class="feed-card-topic <%= subIndex == news.sub.length - 1 ? "last-feed-card-topic" : "" %>"><a href="<%= subItem.url %>" target="_blank" class="img"'+feedTemplateTrack.urlTrack+'><img src="<%= subItem.img %>"></a><a href="<%= subItem.url %>" target="_blank"'+feedTemplateTrack.urlTrack+"><%= subItem.title %></a></div>"),a.push("<% } %>"),a.push("</div></div></div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplate105_106=function(){var a=["<% case 105: case 106: %>"];return a.push("<h2"+feedTemplateTrack.urlTrack+' class="<%= news.templateid == 103 ? "feed-card-icon feed-card-icon-topic" : "" %> <%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push('<div class="feed-card-c feed-card-clearfix">'),a.push('<div class="feed-card-topic-img"><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+'><img src="<%= news.img %>"></a></div>'),a.push('<div class="feed-card-topic-txt feed-card-topic-txt2"><p><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' rel="nofollow"><%= news.summary %></a><a href="<%= news.url %>" target="_blank" rel="nofollow"'+feedTemplateTrack.urlTrack+">[\u8be6\u7ec6]</a></p>"),a.push('<div class="feed-card-topic-list"><h5>\u70ed\u70b9\u63a8\u8350</h5><ul class="feed-card-list">'),a.push("<% for(var subIndex = 0; subIndex < news.sub.length; subIndex ++ ) { var subItem = news.sub[subIndex];%>"),a.push('<li><a href="<%= subItem.url %>" target="_blank"'+feedTemplateTrack.urlTrack+"><%= subItem.title %></a></li>"),a.push("<% } %>"),a.push("</ul></div></div></div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplate107=function(){var a=["<% case 107: %>"];return a.push("<% if(news.icon) { %>"),a.push("<% if(news.iconurl) { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+' class="<%= news.iconClass %>"><a href="<%= news.iconurl %>" target="_blank" style="float:left; margin:4px 10px 0 0;"><img src="<%= news.icon %>" height="20" /></a><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+' class="<%= news.iconClass %>"><a href="<%= news.url %>" target="_blank"><img src="<%= news.icon %>" height="20" style="float:left; margin:4px 10px 0 0;" /><%= news.title %></a></h2>'),a.push("<% } %>"),a.push("<% } else { %>"),a.push("<h2"+feedTemplateTrack.urlTrack+'><a href="<%= news.url %>" target="_blank"><%= news.title %></a></h2>'),a.push("<% } %>"),a.push('<div class="feed-card-c feed-card-clearfix">'),a.push('<div class="feed-card-topic-img"><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+'><img src="<%= news.img.u %>"></a></div>'),a.push('<div class="feed-card-topic-txt feed-card-topic-txt2"><p><a href="<%= news.url %>" target="_blank"'+feedTemplateTrack.urlTrack+' rel="nofollow"><%= news.summary %></a><a href="<%= news.url %>" target="_blank" rel="nofollow"'+feedTemplateTrack.urlTrack+">[\u8be6\u7ec6]</a></p>"),a.push('<div class="feed-card-topic-list"><h5>\u70ed\u70b9\u63a8\u8350</h5><ul class="feed-card-list">'),a.push("<% for(var subIndex = 0; subIndex < news.sub.length; subIndex ++ ) { var subItem = news.sub[subIndex];%>"),a.push('<li><a href="<%= subItem.url %>" target="_blank"'+feedTemplateTrack.urlTrack+"><%= subItem.title %></a></li>"),a.push("<% } %>"),a.push("</ul></div></div></div>"),a.push(templateInfoHTML("news")),a.push("<% break; %>"),a.join("")}(),feedTemplates=function(){var a=50;win.FEED_CARD_INFO.hotNewsCount&&(a=win.FEED_CARD_INFO.hotNewsCount),win.__FEED_CARD_HOT_COUNT=a;var b='<% for(var newsIndex = 0, newsLen = it.newsList.length; newsIndex < newsLen; newsIndex ++) { var news = it.newsList[newsIndex];var itemClz = "feed-card-item";if(news.categoryid === "4"){itemClz=itemClz+" "+itemClz+"-blog";} %><div class="<%= itemClz %>">',c="</div><% } %>",d="<% } %>",e=[b];return e.push(feedTemplate0),e.push(feedTemplate1),e.push(feedTemplate2),e.push(feedTemplate3),e.push(feedTemplate4),e.push(feedTemplate5_6),e.push(feedTemplate7),e.push(feedTemplate16),e.push(feedTemplate101),e.push(feedTemplate102),e.push(feedTemplate103_104),e.push(feedTemplate105_106),e.push(feedTemplate107),e.push(d),e.push(c),e.join("")}(),feedTemplateWeibo=function(){var a=[];return a.push('<div class="feed-card-weibo feed-card-clearfix">'),a.push('<div class="feed-card-weibo-portrait">'),a.push('<a href="http://weibo.com/u/<%= it.user.id %>" target="_blank"><img src="<%= it.user.profile_image_url %>" alt="<%= it.user.screen_name %>"></a>'),a.push("</div>"),a.push('<div class="feed-card-weibo-c">'),a.push('<div class="feed-card-weibo-author">'),a.push('<a href="http://weibo.com/u/<%= it.user.id %>" target="_blank"><%= it.user.screen_name %><%= it.user.remark ? "(" + it.user.remark + ")" : "" %></a>'),a.push("<% if(it.user.verified) {%>"),a.push('<a href="http://verified.weibo.com/verify" target="_blank">'),a.push('<i title="\u5fae\u535a\u8ba4\u8bc1" class="feed-card-weibo-icon feed-card-weibo-icon-verify<%= it.user.verified_type %>"></i>'),a.push("</a>"),a.push("<% } %>"),a.push("</div>"),a.push('<div class="feed-card-weibo-txt"><%= it.text %></div>'),a.push("<% if(it.pic_urls && it.pic_urls.length) { %>"),a.push('<div class="feed-card-weibo-photos feed-card-clearfix">'),a.push("<% for(var picIndex = 0, picLen = it.pic_urls.length; picIndex < picLen; picIndex ++) { %>"),a.push('<a href="<%= it.url %>" target="_blank"><img src="<%= it.pic_urls[picIndex].thumbnail_pic %>"></a>'),a.push("<% } %>"),a.push("</div>"),a.push("<% } %>"),a.push('<div class="feed-card-weibo-a feed-card-clearfix">'),a.push('<div class="feed-card-weibo-time">'),a.push('<a href="<%= it.url %>" target="_blank"><%= it.timeStr %></a>'),a.push("</div>"),a.push('<div class="feed-card-weibo-source">'),a.push("\u6765\u81ea <%= it.source %>"),a.push("</div>"),a.push('<div class="feed-card-weibo-actions">'),a.push('<a href="<%= it.url %>" target="_blank"><i title="\u8d5e" class="feed-card-weibo-icon feed-card-weibo-icon-zan"></i>\u8d5e<%= it.attitudes_count > 0 ? "(" + it.attitudes_count + ")" : "" %></a>'),a.push('<span class="feed-card-weibo-spliter">|</span>'),a.push('<a href="<%= it.url %>" target="_blank">\u8f6c\u53d1<%= it.reposts_count > 0 ? "(" + it.reposts_count + ")" : "" %></a>'),a.push('<span class="feed-card-weibo-spliter">|</span>'),a.push('<a href="<%= it.url %>" target="_blank">\u6536\u85cf</a>'),a.push('<span class="feed-card-weibo-spliter">|</span>'),a.push('<a href="<%= it.url %>" target="_blank">\u8bc4\u8bba<%= it.comments_count > 0 ? "(" + it.comments_count + ")" : "" %></a>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),a.push("</div>"),a.push("</div>"),doT.template(a.join(""),templateSettings)}(),tabTemplate=function(){var a=[];return a.push('<div class="feed-card-tab" id="feedCardTab">'),a.push('<div class="feed-card-tabs feed-card-clearfix" data-sudaclick="feed_nav">'),a.push('<div class="feed-card-tab-firstTab" style="width:<%= it.css_width + 20 %>px;">'),a.push('<span id="feedCardTabFirstTab" style="width:<%= it.css_width %>px;" class="feed-card-tab-tabi feed-card-tab-tabi-selected" data-lid="<%= it.lid %>"><%= it.txt %></span>'),a.push("</div>"),a.push('<div class="feed-card-tab-tabContainer">'),a.push('<div id="feedCardConfigurableTabs" class="feed-card-tab-ctabs feed-card-clearfix"></div>'),a.push('<div id="feedCardMoreTabsTrigger" class="feed-card-tab-more-trigger" style="display:none;">\u66f4\u591a<i></i></div>'),a.push("</div>"),a.push('<div class="feed-card-tab-lastTab" suda-uatrack="key=index_feed&value=float_setting">'),a.push('<span class="feed-card-tab-tabi" id="feedCardSettingsTrigger">\u5174\u8da3\u8bbe\u7f6e</span>'),a.push("</div>"),a.push("</div>"),a.push('<div class="feed-card-tab-more" id="feedCardMoreTabs" style="display:none;"></div>'),a.push('<div class="feed-card-tab-edit" id="feedCardTabEditor" data-sudaclick="posi-setting" style="display:none;"></div>'),a.push('<div class="feed-card-tab-toast" id="feedCardTabToast" style="display:none;"><div id="feedCardTabToastC"></div><a href="javascript:;" id="feedCardTabToastClose">Close</a><span></span></div>'),a.push('<div class="feed-card-tab-labels2 feed-card-clearfix" id="feedCardLabels" style="display:none;">'),a.push('<a href="javascript;" class="feed-card-tab-labels-toggle" id="feedCardLabelsToggle">\u66f4\u591a</a>'),a.push('<div class="feed-card-tab-labels-c feed-card-clearfix" id="feedCardLabelsC"></div>'),a.push("</div>"),a.push("</div>"),a.push('<div class="feed-card-tag-tip" id="feedCardTagTip" suda-uatrack="key=index_feed&value=tag_tip" style="display:none;">'),a.push('<div>\u559c\u6b22\u201c<em id="feedCardTagTipLabel"></em>\u201d\uff1f<a href="javascript;" id="feedCardTagTipAdd">\u9a6c\u4e0a\u8ba2\u9605</a>\u6b23\u8d4f\u6700\u7cbe\u5f69\u5185\u5bb9~</div>'),a.push('<a href="javascript;" id="feedCardTagTipClose">\u5173\u95ed</a>'),a.push("</div>"),a.push('<div class="feed-card-select-tag" id="feedCardSelectTag" style="display:none;">'),a.push('<div class="feed-card-select-tag-will">\u6b32\u6dfb\u52a0\u7684\u7684\u6807\u7b7e\uff1a<span id="feedCardSelectWillTag"></span></div>'),a.push('<div class="feed-card-select-tag-close"><a href="javascript;" id="feedCardSelectTagClose">\u5173\u95ed</a></div>'),a.push('<div class="feed-card-select-tags feed-card-clearfix" id="feedCardSelectTagLabels"></div>'),a.push('<div class="feed-card-select-tag-tip feed-card-clearfix"><p id="feedCardSelectTagTip"></p><a href="javascript;" id="feedCardSelectTagDone" class="disable">\u5b8c\u6210</a></div>'),a.push("</div>"),a.push('<div class="feed-card-notification2" id="feedCardNotification2" style="display:none;"></div>'),a.push('<div class="feed-card-notification" id="feedCardNotification" style="display:none;" suda-uatrack="key=index_feed&value=notification"></div>'),a.push('<div class="feed-card-content" id="feedCardContent" data-sudaclick="feed_list"></div>'),a.join("")}(),columnEditorTemplate=function(){var a=[];return a.push('<div class="feed-card-tab-select" id="feedCardEditStep1">'),a.push('<div class="feed-card-tab-edit-col">'),a.push('<div class="feed-card-tab-edit-tit feed-card-clearfix">'),a.push("<h5>\u6211\u7684\u680f\u76ee\uff1a</h5>"),a.push("<p>\u8bf7\u70b9\u51fb\u9009\u62e9\u60a8\u6240\u611f\u5174\u8da3\u7684\u680f\u76ee</p>"),a.push("</div>"),a.push('<div class="feed-card-tab-edit-cols feed-card-clearfix" id="feedCardEditCols">'),a.push("</div></div>"),a.push("<% if(it.supportKeywords) { %>"),a.push('<div class="feed-card-tab-edit-label" id="feedCardTabEditLabelC">'),a.push('<div class="feed-card-tab-edit-label-tip" id="feedCardEditLabelTip" style="display:none;">\u6700\u591a\u53ea\u80fd\u6dfb\u52a0<%= it.maxKeywordsCount %>\u4e2a\u6807\u7b7e<i></i></div>'),a.push('<div class="feed-card-tab-edit-tit feed-card-clearfix">'),a.push("<h5>\u6211\u7684\u6807\u7b7e\uff1a</h5>"),a.push("<p>\u60a8\u53ef\u4ee5\u8f93\u5165\u81ea\u5df1\u611f\u5174\u8da3\u7684\u4eba\u7269\u6216\u4e8b\u4ef6</p>"),a.push("</div>"),a.push('<div class="feed-card-tab-edit-addLabel feed-card-clearfix">'),a.push('<div class="feed-card-tab-edit-addLabelForm">'),a.push('<input type="text" name="feedCardAddLabelInput" id="feedCardAddLabelInput" placeholder="\u6700\u591a\u8f93\u5165<%= it.maxKeywordLengthEn %>\u4e2a\u5b57">'),a.push('<a href="javascript:;" id="feedCardAddLabelButton">Add</a>'),a.push("</div>"),a.push('<div class="feed-card-tab-edit-hotLabels" id="feedCardEditHotLabels">'),a.push("<span>\u70ed\u8bcd\u63a8\u8350:</span>"),a.push("<% for(var index = 0; index < it.hotKeywords.length; index ++) { %>"),a.push('<a href="javascript:;" suda-uatrack="key=index_feed&value=label_recommend"><%= it.hotKeywords[index] %></a>'),a.push("<% } %>"),a.push("</div>"),a.push("</div>"),a.push('<div class="feed-card-tab-edit-labels feed-card-clearfix" id="feedCardEditSelectLabels">'),a.push("</div>"),a.push("</div>"),a.push("<% } %>"),a.push("</div>"),a.push('<div class="feed-card-tab-reorder" style="display:none;" id="feedCardEditStep2">'),a.push('<div class="feed-card-tab-edit-tit feed-card-clearfix">'),a.push("<p>\u60a8\u53ef\u4ee5\u62d6\u62fd\u8c03\u6574\u663e\u793a\u987a\u5e8f</p>"),a.push("</div>"),a.push('<div class="feed-card-tab-reorder-c feed-card-clearfix" id="feedCardEditSelectW">'),a.push("</div></div>"),a.push('<div class="feed-card-tab-edit-step feed-card-clearfix">'),a.push('<p id="feedCardEditTip"></p>'),a.push('<div class="feed-card-tab-edit-steps">'),a.push('<a href="javascript:;" class="prev" id="feedCardEditPrev" style="display:none;" suda-uatrack="key=index_feed&value=setting_btn_prev">\u4e0a\u4e00\u6b65</a>'),a.push('<a href="javascript:;" class="next" id="feedCardEditNext" suda-uatrack="key=index_feed&value=setting_btn_next">\u4e0b\u4e00\u6b65</a>'),a.push('<a href="javascript:;" class="done" id="feedCardEditDone" style="display:none;" suda-uatrack="key=index_feed&value=setting_btn_save">\u5b8c\u6210</a>'),a.push("</div></div>"),a.join("")}(),userData=function(){function a(a,b,c){var d;return a.length&&b.length?d='{"lids":['+a.join(",")+'],"keywords":["'+b.join('","')+'"],':0==b.length?d='{"lids":['+a.join(",")+'],"keywords":[],':0==a.length&&(d='{"lids":[],"keywords":["'+b.join('","')+'"],'),d+=c?'"selectedTag":"'+c+'"}':'"selectedTag":""}'}function b(b,c){storage.setItem(e,a(b,c))}function c(){var a=storage.getItem(e);if(a)try{return utils.getJSON(a)}catch(b){}return null}function d(a,b,c){IO.jsonp({url:"http://user.mix.sina.com.cn/subscribe/api/subscribe/get",data:{from:"pc",project_id:[a,b].join(",")},onsuccess:function(d){if(d&&d.result&&d.result.status&&0==d.result.status.code){var e=[],f=[],g=d.result[a];if(g)for(var h=0;h<g.length;h++)f.push(win.parseInt(g[h].c,10));var i=d.result[b];if(i)for(var h=0;h<i.length;h++)e.push(i[h].c);c({lids:f,keywords:e})}}})}var e="FEED_CARD_DEFAULT_TAB";return{setDefaultData:b,getDefaultData:c,getUserDataFromNet:d,generateStr:a}}(),ScrollCard=function(){var a=function(a){return"function"==typeof a},b=function(a){var b=this;b.index=0,b.opts=a;var c=a.container;b.items=[];for(var d=0;d<c.children.length;d++)b.items.push(c.children[d]);b.items[0].style.display="block"};return b.prototype={_show:function(a){for(var b=this,c=b.items.length-1;c>=0;c--)b.items[c].style.display="none";b.items[a].style.display="block"},goToNext:function(){var b=this;a(b.opts.beforeChange)&&b.opts.beforeChange.call(b),b.index++,b.index>=b.items.length&&(b.index=0),b._show(b.index),b.onChange&&b.onChange(b.index,b.items.length)},goToPrev:function(){var b=this;a(b.opts.beforeChange)&&b.opts.beforeChange.call(b),b.index--,b.index<0&&(b.index=b.items.length-1),b._show(b.index),b.onChange&&b.onChange(b.index,b.items.length)},goTo:function(b){var c=this;a(c.opts.beforeChange)&&c.opts.beforeChange.call(c),b>=0&&b<c.items.length&&(c.index=b,c._show(b),c.onChange&&c.onChange(c.index,c.items.length))}},b}(),NotificationGuarder=function(){var a=function(a){utils.fillOptionsWithDefault(this,a,{notificationTemplate:"\u6709{n}\u6761\u6d88\u606f\uff0c\u70b9\u51fb\u67e5\u770b",notificationTimeout:3e4}),this.notificationTimeout<1e4&&(this.notificationTimeout=1e4),this.count=0,this.dom=dom.$("feedCardNotification")};return a.prototype={begin:function(a,b,c){var d=this;d.time=a,d.pageid=b,d.lid=c,d.enable=!0,d.count=0,d.timeout&&win.clearInterval(d.timeout),d.timeout=win.setInterval(function(){d._sendRequest()},d.notificationTimeout)},_sendRequest:function(){var a=this;IO.jsonp({url:"http://v.feed.mix.sina.com.cn/api/roll/last_news_count",jsonpValue:"feedCardJsonpCallback2",data:{ctime:a.time,pageid:a.pageid,lid:a.lid},onsuccess:function(b){b&&b.result&&b.result.status&&0==b.result.status.code&&b.result.total>0&&a.enable&&(a.time=b.result.ctime,a.showDOM(b.result.total))}})},hideDOM:function(){this.dom.style.display="none",win.clearTimeout(this.timeout),this.enable=!1},showDOM:function(a){this.count+=a,this.dom.style.display="block",this.dom.innerHTML=this.notificationTemplate.replace("{n}",this.count)}},a}(),FeedCard=function(){var a=3,b=15,c="http://feed.mix.sina.com.cn/api/roll/get",d="http://feed.mix.sina.com.cn/api/roll/tags",e="http://s3.feed.mix.sina.com.cn/iframe/feed/",f=/^http:\/\/[^\/]+\.(sina\.com\.cn|sina\.cn|weibo\.com|weibo\.cn|sinaimg\.cn|sinaimg\.com|sinastorage\.com|sinaedge\.com|v\.iask\.com)/i,g=1,h=50,i='\u8fd8\u672a\u6dfb\u52a0\u6807\u7b7e! <span onclick="window.__SinaFeedCard__.openSettings();" style="text-decoration:underline; cursor:pointer;">\u7acb\u5373\u6dfb\u52a0</span>',j="http://i1.sinaimg.cn/home/main/ipadwww14/04/loading.gif",k='<div class="feed-card-guessTips" id="feedCardGuessTips"><div class="feed-card-guessTipsC"><p class="feed-card-guessTipsT">\u8fd9\u91cc\u662f\u63a8\u8350\u5f15\u64ce\u4e3a\u4f60\u63a8\u8350\u7684\u5174\u8da3\u5185\u5bb9\uff0c</p><p class="feed-card-guessTipsT">\u8d8a\u591a\u4f7f\u7528\u8d8a\u61c2\u4f60~</p><span class="feed-card-guessTipsBtn" onclick="__SinaFeedCard__.hideGuessLike();">\u77e5\u9053\u4e86</span></div><span class="feed-card-guessTipsA"></span></div>',l=function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return 10>c&&(c="0"+c),10>d&&(d="0"+d),b+""+c+d},m=function(){var a=0;return function(b){return a++,b+a}}(),n=function(c){var d=this;utils.fillOptionsWithDefault(d,c,{videoPlayType:"internal",pageSize:b,stepSize:a,_iotype:0,isLoading:!1,loadType:g,yPosition:"auto",tabHeight:h,tagsShowCount:3,cardImageParam:{w:130,h:87},albumImageParam:{w:0,h:143},staticJSONMinute:"09",staticJSONDate:l()}),win.__SinaFeedCard__cardImageParam=d.cardImageParam,d.supportNotification&&(d.notificationGuarder=new NotificationGuarder({notificationTemplate:d.notificationTemplate,notificationTimeout:d.notificationTimeout})),d.container=dom.$(c.containerID),d.htmlGenerator=doT.template(feedTemplates,templateSettings),d.fromCount=0,d.init()};return n.prototype={init:function(){var a=this,b=doc.createDocumentFragment(),c=a.contentDiv=doc.createElement("div"),d=a.loadingDiv=doc.createElement("div"),e=doc.createElement("img");e.src=j,e.width=30,e.height=30,d.appendChild(e),d.className="feed-card-loading feed-card-loading0",d.style.display="none";var f=a.pageControlDiv=doc.createElement("div");f.className="feed-card-page",f.style.display="none",b.appendChild(c),b.appendChild(d),1===a.loadType?a._initScrollEnd():2===a.loadType&&a._initClickLoad(b),b.appendChild(f),a.container.appendChild(b),dom.addEvent(a.pageControlDiv,"click",function(b){var c=dom.getTarget(b);a._pageOnClick(c),dom.preventDefault(b)}),a.supportNotification&&dom.addEvent(dom.$("feedCardNotification"),"click",function(){a.setLidAndLoad(a.firstTab.lid)})},_initScrollEnd:function(){var a=this,b=null;dom.addEvent(win,"scroll",function(){b&&win.clearTimeout(b),b=win.setTimeout(function(){var b=utils.viewData(),c=utils.isFunction(a.autoLoadDistance)?a.autoLoadDistance():a.autoLoadDistance;b.viewHeight+b.scrollTop+c>=b.documentHeight&&a._loadMore()},100)})},_initClickLoad:function(a){var b=this,c=doc.createElement("div");c.style.display="none",c.className="feed-card-loading feed-card-loading1",c.innerHTML=b.clickLoadText,a.appendChild(c),b.clickLoadDiv=c,dom.addEvent(b.clickLoadDiv,"click",function(){b._loadMore(),b.clickLoadDiv.style.display="none"})},_setLoadingState:function(a){var b=this;b.isLoading=a,a?b.loadingDiv.style.display="block":b.loadingDiv.style.display="none"},_loadMore:function(){var a=this;a.isLoading||a.step>a.stepSize||a._loadNews(a.page,a.step)},_loadNews:function(a,b,f){var g=this,h=null;if(g.lid==win.FEED_CARD_INFO.firstTab.lid){var i=win.FEED_CARD_INFO.firstTab.ignoreLidCheck;h=win.FEED_CARD_INFO.firstTab.encode}else{var i=win.FEED_CARD_INFO.tabInfos["tab_"+g.lid].ignoreLidCheck;h=win.FEED_CARD_INFO.firstTab.encode}var j=(a-1)*g.stepSize+b;if(!g.isLoading&&g.isThereNews!==!1){1==b&&(g.contentDiv.innerHTML="",g.fromCount=0),g._setLoadingState(!0),g.pageControlDiv.style.display="none";var k,l;switch(g._iotype){case 0:k=c,l={pageid:g.pageid,lid:g.lid,num:g.pageSize,versionNumber:g.versionNumber},g.enableStatic&&(k=e+g.staticJSONDate+"/"+g.staticJSONMinute+"_nocre_pageid_"+g.pageid+"_lid_"+g.lid+".json",l={});break;case 1:k=d+"?"+g.searchQuery,l={tags:g._keywords.join(","),num:g.pageSize,lid:g.lid,versionNumber:g.versionNumber};break;case 2:k=g.guessLikeURL+"?"+g.creQuery,l={num:g.pageSize,lid:g.lid,versionNumber:g.versionNumber};break;case 3:try{k=win.FEED_CARD_INFO.tabInfos["tab_"+g.lid].url}catch(m){}l={num:g.pageSize,lid:g.lid,versionNumber:g.versionNumber}}g.lastTime?l.ctime=g.lastTime:l.page=j;var n="feedCardJsonpCallback";g.enableStatic&&(n="feed_cb_nomore_nocre"),l.encode=h||"utf-8";var o=function(a,b,c,d){IO.jsonp({url:a,data:b,jsonpValue:c,uuid:g.uuid,onsuccess:function(a,b){g.dataHandle&&"function"==typeof g.dataHandle&&g.dataHandle(a),g.currentContType=d,g.sendTrackTimeout&&win.clearTimeout(g.sendTrackTimeout),g.sendTrackTimeout2&&win.clearTimeout(g.sendTrackTimeout2),g._setLoadingState(!1),g._uaTrack("index_feed","n_feed_pageview:"+g.lid),g._uaTrack("index_feed","refresh:"+(3*(g.page-1)+g.step-1)+":"+g.lid),a&&a.result&&a.result.status&&0==a.result.status.code&&(i||a.result.lid==g.lid)&&(1==g.page&&1==g.step&&g.lid==g.firstTab.lid&&!g.enableStatic&&g.supportNotification&&"normal"===g.currentContType&&g.notificationGuarder.begin(a.result.start,g.pageid,g.lid),g.lastTime=a.result.end,g.totalCount=win.parseInt(a.result.total,10),g.totalPage=Math.ceil(win.parseInt(a.result.total,10)/g.stepSize/g.pageSize),g._renderNews(g._sortNews(a.result),f),g.step++,g._createScrollCard(),g._getWeibos()),g._renderBlogCmnt()}})};"undefined"==typeof g.enableStatic&&(g.enableStatic=!1),o(k,l,n,g.enableStatic?"static":"normal"),g.sendTrackTimeout=win.setTimeout(function(){g._uaTrack("index_feed","feed_timeout:"+g.lid),g.enableStatic||0!==g._iotype?g._renderNoData():(k=e+"day/day_nocre_pageid_"+g.pageid+"_lid_"+g.lid+".json",l={},n="feed_cb_nomore_nocre",o(k,l,n,"static"),g.sendTrackTimeout2=win.setTimeout(function(){g._renderNoData()},5e3))},5e3)}},_renderNoData:function(){var a=this;a._setLoadingState(!1),a.contentDiv.innerHTML='<div class="feed-card-item-no-data">'+a.noDataText+"</div>"},_renderBlogCmnt:function(){for(var a=this,b=a.contentDiv,c=dom.getByAttributeName(b,"article-type","blog","a"),d=[],e=0,f=c.length;f>e;e++){var g=c[e];d.push(g.getAttribute("blog-id"))}0!==d.length&&(window.$ScriptLoader={},window.$ScriptLoader.response=function(a,b){if(b)for(var d=0,e=c.length;e>d;d++){var f=c[d],g=f.getAttribute("blog-id"),h=0;b[g]&&b[g].c&&(h=b[g].c,h&&(f.innerHTML=f.innerHTML+"("+h+")",f.removeAttribute("article-type"),f.removeAttribute("blog-id")))}},IO.jsonp({url:"http://comet.blog.sina.com.cn/api",data:{blogids:d.join(","),maintype:"num2",requestId:"_feed_",fetch:"c"},jsonpValue:"$ScriptLoader.response",onsuccess:function(a,b){}},!0))},_sortNews:function(a){function b(a,b){if(a){a.sort(function(a,b){return win.parseInt(a.pos,10)-win.parseInt(b.pos,10)});for(var c=0;c<a.length;c++){var d=a[c];switch(b){case 1:d.isAdNews=!0;break;case 2:d.isCreNews=!0;break;case 3:d.isTopNews=!0}for(;e[d.pos];)d.pos++;e[d.pos]=d}}}var c=this,d=[],e={};b(a.pdps,1),b(a.cre,2),b(a.top,3);for(var f=a.data,g=0;g<f.length;g++){var h=f[g];h.isDataNews=!0,c.commonNewsSupportWeiboInfo||(h.weiboName=null),d.push(h)}for(var i in e)d.splice(win.parseInt(i,10)-1,0,e[i]);return d},_getWeiboInfo:function(a){var b=this;IO.jsonp({url:"http://api.sina.com.cn/weibo/2/users/show_batch.json",data:{source:4526198296,uids:a.join(",")},onsuccess:function(a){if(a&&a.result&&a.result.status&&0==a.result.status.code)for(var c=a.result.data.users,d=0;d<c.length;d++)for(var e=c[d],f=dom.getByAttributeName(b.container,"data-uid",e.id,"a"),g=0;g<f.length;g++)f[g].innerHTML='<img src="'+e.profile_image_url+'" alt="'+e.screen_name+'" />'+e.screen_name}})},_createScrollCard:function(){var a=this,b=dom.getByAttributeName(a.container,"data-id","feedCardListScrollNews","div");if(0!=b.length){var c=new ScrollCard({container:b[0],beforeChange:function(){var a=this,b=a.index,c=a.items[b],d=c.getAttribute("video-ctime");d&&window.__SinaFeedCard__.stopVideo(d)}}),d=dom.getByAttributeName(a.container,"data-id","feedCardListScrollNewsNum","span")[0];c.onChange=function(a,b){d.innerHTML=a+1+"/"+b},dom.addEvent(dom.getByAttributeName(a.container,"data-id","feedCardListScrollNewsPrev","a")[0],"click",function(a){c.goToPrev(),dom.preventDefault(a)}),dom.addEvent(dom.getByAttributeName(a.container,"data-id","feedCardListScrollNewsNext","a")[0],"click",function(a){c.goToNext(),dom.preventDefault(a)}),this._getWeiboInfo(this.weiboUids)}},_getWeibos:function(){var a=this;a._weiboMids&&a._weiboMids.length&&(IO.jsonp({url:"http://api.weibo.com/2/statuses/show_batch.json",data:{source:"4526198296",ids:a._weiboMids.join(",")},onsuccess:function(b){if(1==b.code)for(var c=b.data.statuses,d=0;d<c.length;d++){var e=c[d];try{var f=new Date(e.created_at.replace(/\+[^\s]+/g,"")+"+0800")}catch(g){var f=new Date(e.created_at)}e.timeStr=utils.readableDate(f.getTime()/1e3),e.url=a._weiboUrls[e.id];for(var h=dom.getByAttributeName(a.container,"data-id","news-"+e.id,"div"),i=0;i<h.length;i++)h[i].innerHTML=feedTemplateWeibo(e)}}}),a._weiboMids=null)},_dealNews:function(a){for(var b=this,c=[],d=0;d<a.length;d++)b._dealNewsItem(a[d])&&c.push(a[d]);return c},_dealNewsItem:function(a){var b=this;if(!a.url&&2!=a.templateid&&1001!=a.templateid&&1002!=a.templateid)return!1;
if(2==a.templateid&&(!a.sub||0==a.sub.length))return!1;if(b.iconGenerator&&"function"==typeof b.iconGenerator&&(a.iconClass=b.iconGenerator(a)),7==a.templateid&&(b._weiboMids||(b._weiboMids=[],b._weiboUrls={}),b._weiboMids.push(a.mid),b._weiboUrls[a.mid]=a.url),a.commentid){var c=a.commentid.split(":");c.length>=3&&(a.c_channel=c[0],a.c_id=c[1],a.c_style=c[2])}if(a.columnid){var d=a.columnid.split(","),e=win.FEED_CARD_INFO.columnInfos;if(e){for(var g=0,h=d.length;h>g&&(!e[d[g]]||0!=e[d[g]].columnid);g++);h>g&&(a.columnInfos=[e[d[g]]])}}a.timeStr=utils.readableDate(a.ctime),a._uuid=m("feed-item-"),a.templateid=win.parseInt(a.templateid,10),a.lid=b.lid;try{a.keywords=a.keywords?a.keywords.split(","):[],a.keywords=a.keywords.slice(0,b.tagsShowCount)}catch(i){a.keywords=[]}if(b.summaryKey&&("summary"!==b.summaryKey||a.summary?a.intro=a[b.summaryKey]:a.intro=a.intro),a.isAdNews&&a.pvmonitor&&a.pvmonitor.length){a.namonitor&&a.namonitor.weibourl&&(a.weibourl=a.namonitor.weibourl+"&url="+win.encodeURIComponent(a.weibourl));try{var j=doc.createElement("div");j.style.display="none";for(var k=0;k<a.pvmonitor.length;k++){var l=new Image;l.src=a.pvmonitor[k],j.appendChild(l)}doc.body.appendChild(j)}catch(i){}}if(a.isCreNews&&a.sub&&a.sub.length){var n=[];if(a.sub&&a.sub.length)for(var o=0;o<a.sub.length;o++)if(b._dealNewsItem(a.sub[o]),a.sub[o].uids&&a.sub[o].uids.length){a.sub[o].weiboCount=a.sub[o].uids.length,a.sub[o].uids=a.sub[o].uids.slice(0,2);for(var p=0;p<a.sub[o].uids.length;p++)a.sub[o].uids[p]=a.sub[o].uids[p].substring(0,a.sub[o].uids[p].indexOf("_"));Array.prototype.push.apply(n,a.sub[o].uids)}else a.sub[o].weiboCount=a.sub[o].top_num||0;b.weiboUids=n}if((1001==a.templateid||1002==a.templateid)&&a.sub&&a.sub.length)for(var o=0;o<a.sub.length;o++)b._dealNewsItem(a.sub[o]);if((2==a.categoryid||4==a.categoryid)&&a.images&&a.images.length&&(a.imageCount=a.images.length,a.images=b._getCalculatedImagesWidth(a.images)),a.templateid<100&&a.img&&a.img.u&&f.test(a.img.u)&&(a.img.u="http://s.img.mix.sina.com.cn/auto/resize?img="+encodeURIComponent(a.img.u)+"&size="+b.cardImageParam.w+"_"+b.cardImageParam.h),107===a.templateid&&f.test(a.img.u)&&(a.img.u="http://s.img.mix.sina.com.cn/auto/resize?img="+encodeURIComponent(a.img.u)+"&size=300_200"),a.isDataNews&&a.img&&a.img.u&&(a.img.w<.9*b.cardImageParam.w||a.img.h<.9*b.cardImageParam.h)&&(a.img=[]),-100===b.lid&&2!=a.categoryid&&a.img&&0===a.img.length&&a.images&&a.images.length){for(var q=0,r=a.images.length;r>q&&!(a.images[q].w>=a.images[q].h);q++);q==a.images.length?a.img=a.images[0]:a.img=a.images[q],f.test(a.img.u)&&(a.img.u="http://s.img.mix.sina.com.cn/auto/crop?img="+a.img.u+"&size="+b.cardImageParam.w+"_"+b.cardImageParam.h)}if(b.enableHotComment)if(a.rcomment)try{a.rcomment=utils.getJSON(a.rcomment),a.rcomment.nickname=a.rcomment.nickname||"nickname"}catch(i){a.rcomment=""}else a.rcomment="";else a.rcomment="";return!0},_uaTrack:function(a,b){win.SUDA&&win.SUDA.uaTrack&&win.SUDA.uaTrack(a,b)},_getCalculatedImagesWidth:function(a){for(var b=this,c=660,d=b.albumImageParam.h,e=5,g=[],h=0,i=0,j=a.length;j>i;i++){var k=Math.floor(d/a[i].h*a[i].w);if(h+=k+e,h>c){0==i&&(f.test(a[i].u)&&(a[i].u="http://s.img.mix.sina.com.cn/auto/resize?img="+encodeURIComponent(a[i].u)+"&size="+b.albumImageParam.w+"_"+b.albumImageParam.h),g.push(a[i]));break}f.test(a[i].u)&&(a[i].u="http://s.img.mix.sina.com.cn/auto/resize?img="+encodeURIComponent(a[i].u)+"&size="+b.albumImageParam.w+"_"+b.albumImageParam.h),g.push(a[i])}return g},_sendUATrack:function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c];d.isDataNews?d._uaTrackValue=0:d.isTopNews?d._uaTrackValue=1:d.isCreNews?(d._uaTrackValue=2,2==d.templateid&&d.sub&&d.sub.length?b._uaTrack("index_feed","creNewsShow_SNS:"+c+":"+b.lid):b._uaTrack("index_feed","creNewsShow:"+c+":"+b.lid)):d.isAdNews&&(d._uaTrackValue=3)}},_renderNews:function(a,b){var c=this;if(a=c._dealNews(a),c.beforeRender&&"function"==typeof c.beforeRender&&c.beforeRender(a),c.isThereNews=!0,a.length){c._sendUATrack(a);var d=c.htmlGenerator({newsList:a,fromCount:c.fromCount,cardSetting:{videoPlayType:c.videoPlayType}});try{storage.getItem("feed_rendered_guessLikeTip")||1==c.step&&1==c.page&&-101==c.lid&&(d=k+d)}catch(e){}if(c.fromCount+=a.length,1==c.step)c.contentDiv.innerHTML=d;else{var f=doc.createDocumentFragment(),g=doc.createElement("div");g.innerHTML=d,f.appendChild(g),c.contentDiv.appendChild(f)}if(c.step==c.stepSize||c.totalCount<=c.pageSize*c.stepSize*(c.page-1)+c.pageSize*c.step?(c.pageControlDiv.innerHTML=c._createPageControl(c.totalPage,c.page),c.pageControlDiv.style.display="block",c.totalCount<=c.page*c.pageSize*c.stepSize&&(c.isThereNews=!1)):c.clickLoadDiv&&(c.clickLoadDiv.style.display="block"),win.bdShare&&win.bdShare.fn&&win.bdShare.fn.init&&win.bdShare.fn.init(),c.enableStatic||"static"===c.currentContType)return c.pageControlDiv.innerHTML=c._createPageControl(1,c.page),c.pageControlDiv.style.display="block",void(c.isThereNews=!1)}else if(c.isThereNews=!1,1==c.step&&1!=b){var g=doc.createElement("div");g.className="feed-card-item-no-data",g.innerHTML=c.noDataText,c.contentDiv.appendChild(g)}else c.pageControlDiv.innerHTML=c._createPageControl(c.totalPage,c.page),c.pageControlDiv.style.display="block";if(1===b){c.isThereNews=!1,c.pageControlDiv.style.display="none";var h=doc.createElement("div");h.className="feed-card-tag-more",h.innerHTML='\u66f4\u591a\u5173\u4e8e<a href="http://search.sina.com.cn/?c=news&ie=utf-8&q='+win.encodeURIComponent(c._keywords[0])+'" target="_blank">'+c._keywords[0]+'</a>\u7684\u6587\u7ae0\uff0c<a href="http://search.sina.com.cn/?c=news&ie=utf-8&q='+win.encodeURIComponent(c._keywords[0])+'" target="_blank">\u70b9\u51fb\u67e5\u770b &gt;</a>',c.contentDiv.appendChild(h)}return a},_createPageControl:function(a,b){var c,d,e=[],f=b-1;if(f>=5*Math.floor((a-1)/5)){for(a>5&&e.push('<span class="pagebox_pre pre5"><a href="javascript:void 0;">\u4e0a5\u9875</a></span>'),e.push(0===f?'<span class="pagebox_pre_nolink">\u4e0a\u4e00\u9875</span>':'<span class="pagebox_pre"><a href="javascript:void 0;">\u4e0a\u4e00\u9875</a></span>'),c=5*Math.floor((a-1)/5);a>c;c++)e.push(c===f?'<span class="pagebox_num_nonce">'+(c+1)+"</span>":'<span class="pagebox_num" data-page="'+c+'"><a href="javascript:void 0;">'+(c+1)+"</a></span>");e.push(f===a-1?'<span class="pagebox_next_nolink">\u4e0b\u4e00\u9875</span>':'<span class="pagebox_next"><a href="javascript:void 0;">\u4e0b\u4e00\u9875</a></span>')}else if(f>=5){for(e.push('<span class="pagebox_pre pre5"><a href="javascript:void 0;">\u4e0a5\u9875</a></span>'),e.push('<span class="pagebox_pre"><a href="javascript:void 0;">\u4e0a\u4e00\u9875</a></span>'),d=5*Math.floor(f/5),c=5*Math.floor(f/5);d+5>c;c++)e.push(c===f?'<span class="pagebox_num_nonce">'+(c+1)+"</span>":'<span class="pagebox_num" data-page="'+c+'"><a href="javascript:void 0;">'+(c+1)+"</a></span>");e.push('<span class="pagebox_next"><a href="javascript:void 0;">\u4e0b\u4e00\u9875</a></span>'),e.push('<span class="pagebox_next next5"><a href="javascript:void 0;">\u4e0b5\u9875</a></span>')}else{for(e.push(0===f?'<span class="pagebox_pre_nolink">\u4e0a\u4e00\u9875</span>':'<span class="pagebox_pre"><a href="javascript:void 0;">\u4e0a\u4e00\u9875</a></span>'),c=0;5>c;c++)e.push(c===f?'<span class="pagebox_num_nonce">'+(c+1)+"</span>":'<span class="pagebox_num" data-page="'+c+'"><a href="javascript:void 0;">'+(c+1)+"</a></span>");e.push('<span class="pagebox_next"><a href="javascript:void 0;">\u4e0b\u4e00\u9875</a></span>'),e.push('<span class="pagebox_next next5"><a href="javascript:void 0;">\u4e0b5\u9875</a></span>')}return e.join("")},_pageOnClick:function(a){var b=this,c=a.parentNode,d=!1;dom.hasClass(c,"pagebox_next")?(dom.hasClass(c,"next5")?this.page=5*(Math.floor((this.page-1)/5)+1)+1:this.page+=1,d=!0):dom.hasClass(c,"pagebox_pre")?(dom.hasClass(c,"pre5")?this.page=5*(Math.floor((this.page-1)/5)-1)+1:this.page-=1,d=!0):dom.hasClass(c,"pagebox_num")&&(this.page=win.parseInt(c.getAttribute("data-page"),10)+1,d=!0),d&&(b.step=1,b.ctime=null,2!=b._iotype&&(b.lastTime=null),"auto"===b.yPosition?win.scrollTo(0,utils.getPosition(b.contentDiv).y-2*b.tabHeight):win.scrollTo(0,b.yPosition-taht.tabHeight),b.isThereNews=!0,b._loadNews(b.page,b.step))},setLidAndLoad:function(a){var b=this;b.page=1,b.step=1,b.uuid=(new Date).getTime()+"_"+Math.random(),b.lid=a,b.lastTime=null,b.supportNotification&&b.notificationGuarder.hideDOM(),-101==a?b._iotype=2:-100==a?b._iotype=1:b._iotype=0,-1e3>=a&&(b._iotype=3),b.isThereNews=!0,b.pageControlDiv.style.display="none",b.ctime=null,b.isLoading=!1,b.clickLoadDiv&&(b.clickLoadDiv.style.display="none"),b._loadNews(1,1)},setKeywordsAndLoad:function(a,b){var c=this;if(c.supportNotification&&c.notificationGuarder.hideDOM(),c.page=1,c.step=1,c.lid=-100,c.isThereNews=!0,c.uuid=(new Date).getTime()+"_"+Math.random(),c.lastTime=null,c._keywords=a,c.pageControlDiv.style.display="none",c._iotype=1,c.isLoading=!1,c.clickLoadDiv&&(c.clickLoadDiv.style.display="none"),c.ctime=null,a&&a.length)c._loadNews(1,1,b);else{var d=doc.createElement("div");d.className="feed-card-item-no-data",d.innerHTML=i,c.contentDiv.innerHTML="",c.contentDiv.appendChild(d)}}},n}(),ColumnEditor=function(){var a=function(a){var b=this;utils.fillOptions(b,a),b.container=dom.$(b.containerID),b.htmlGenerator=doT.template(columnEditorTemplate,templateSettings),b.createHTML()};return a.prototype={createHTML:function(){var a=this,b=7;a.maxKeywordLength&&(b=Math.floor(a.maxKeywordLength/2)),a.container.innerHTML=a.htmlGenerator({supportKeywords:a.supportKeywords,maxKeywordsCount:a.maxKeywordsCount,maxKeywordLengthEn:b,hotKeywords:a.hotKeywords}),a.feedCardTabEditor=dom.$("feedCardTabEditor"),a.feedCardEditCols=dom.$("feedCardEditCols"),a.feedCardEditNext=dom.$("feedCardEditNext"),a.feedCardEditPrev=dom.$("feedCardEditPrev"),a.feedCardEditDone=dom.$("feedCardEditDone"),a.feedCardEditTip=dom.$("feedCardEditTip"),a.feedCardEditStep1=dom.$("feedCardEditStep1"),a.feedCardEditStep2=dom.$("feedCardEditStep2"),a.feedCardEditSelectW=dom.$("feedCardEditSelectW"),a.feedCardEditHotLabels=dom.$("feedCardEditHotLabels"),a.initDrag(),dom.addEvent(a.feedCardEditDone,"click",function(b){dom.getTarget(b);a.onEditDone(),dom.preventDefault(b)}),dom.addEvent(a.feedCardEditNext,"click",function(b){dom.getTarget(b);a.goToStep2(),dom.preventDefault(b)}),dom.addEvent(a.feedCardEditPrev,"click",function(b){dom.getTarget(b);a.goToStep1(),dom.preventDefault(b)}),dom.addEvent(a.feedCardEditCols,"click",function(b){var c=dom.getTarget(b);if("A"===c.tagName.toUpperCase()){var d=win.parseInt(c.getAttribute("data-lid"),10);if(dom.hasClass(c,"selected")){dom.removeClass(c,"selected"),a.tabInfos["tab_"+d].selected=!1;var e=utils.indexOf(a.selectedLids,d);a.selectedLids.splice(e,1),-100===d&&a.supportKeywords&&(a.feedCardTabEditLabelC.style.display="none")}else dom.addClass(c,"selected"),a.tabInfos["tab_"+d].selected=!0,a.selectedLids.push(d),-100===d&&a.supportKeywords&&(a.feedCardTabEditLabelC.style.display="block")}dom.preventDefault(b)}),a.supportKeywords&&(a.feedCardTabEditLabelC=dom.$("feedCardTabEditLabelC"),a.feedCardEditSelectLabels=dom.$("feedCardEditSelectLabels"),a.feedCardAddLabelInput=dom.$("feedCardAddLabelInput"),a.feedCardAddLabelButton=dom.$("feedCardAddLabelButton"),a.feedCardEditLabelTip=dom.$("feedCardEditLabelTip"),a.feedCardEditLabelTipHTML=a.feedCardEditLabelTip.innerHTML,dom.addEvent(dom.$("feedCardEditHotLabels"),"click",function(b){var c=dom.getTarget(b);"A"===c.tagName.toUpperCase()&&a.addKeyword(c.innerHTML)&&dom.addClass(c,"selected"),dom.preventDefault(b)}),dom.addEvent(a.feedCardEditSelectLabels,"click",function(b){var c=dom.getTarget(b);"A"===c.tagName.toUpperCase()&&a.removeKeyword(c.innerHTML),dom.preventDefault(b)}),dom.addEvent(a.feedCardAddLabelButton,"click",function(b){dom.getTarget(b);a.addKeyword(a.feedCardAddLabelInput.value)&&(a.feedCardAddLabelInput.value=""),dom.preventDefault(b)}),dom.addEvent(a.feedCardAddLabelInput,"keyup",function(b){var b=dom.getEvent(b);switch(b.keyCode){case 13:a.addKeyword(a.feedCardAddLabelInput.value)&&(a.feedCardAddLabelInput.value="");break;default:a.feedCardEditLabelTip.style.display="none"}}))},initDrag:function(){var a,b,c,d,e,f,g=this,h=!1,i=!1;dom.addEvent(g.feedCardEditSelectW,utils.downEvent,function(g){var i=dom.getTarget(g);"A"===i.tagName.toUpperCase()?(e=i,h=!0,f=utils.getMousePos(dom.getEvent(g)),e.style.position="relative",e.style.zIndex="1000",a=f.x,b=f.y,c=0,d=0):(e=null,h=!1),dom.preventDefault(g),dom.stopPropagation(g)}),dom.addEvent(g.feedCardEditSelectW,utils.moveEvent,function(c){h&&e&&(i=!0,f=utils.getMousePos(dom.getEvent(c)),e.style.left=f.x-a+"px",e.style.top=f.y-b+"px"),win.getSelection?win.getSelection().removeAllRanges():doc.selection.empty(),dom.preventDefault(c),dom.stopPropagation(c)}),dom.addEvent(doc,utils.upEvent,function(a){i&&e&&(e.style.position="",e.style.left="",e.style.top="",e.style.zIndex="",i=!1,e=null,h=!1)}),dom.addEvent(g.feedCardEditSelectW,utils.upEvent,function(c){if(i&&e){var d=f.x-a,j=f.y-b,k=Math.floor(Math.abs(d)/122)*(d>0?1:0==d?0:-1),l=Math.floor(Math.abs(j)/42)*(j>0?1:0==j?0:-1),m=win.parseInt(e.getAttribute("data-index"),10),n=m+k+5*l;0>n&&(n=0),n>=g.selectedLids.length&&(n=g.selectedLids.length-1),g.selectedLids.splice(m,1),g.selectedLids.splice(n,0,win.parseInt(e.getAttribute("data-lid"),10));for(var o=[],p=0;p<g.selectedLids.length;p++){var q=g.tabInfos["tab_"+g.selectedLids[p]];o.push('<a href="javascript:;" data-lid="'+q.lid+'" data-index="'+p+'">'+q.txt+"</a>")}g.feedCardEditSelectW.innerHTML=o.join(""),e.style.position="",e.style.left="",e.style.top="",e.style.zIndex="",i=!1,e=null,h=!1,dom.preventDefault(c),dom.stopPropagation(c)}})},addKeyword:function(a){var b=this;b.feedCardEditLabelTip.style.display="none",a=utils.safeStr(utils.trim(a));var c=!1;a&&utils.cn_size(a,!0)<=b.maxKeywordLength?b.keywords.length>=b.maxKeywordsCount?(b.feedCardEditLabelTip.innerHTML=b.feedCardEditLabelTipHTML,b.feedCardEditLabelTip.style.display="block"):utils.indexOf(b.keywords,a)<0?(b.keywords.push(a),b.feedCardEditSelectLabels.innerHTML+='<a href="javascript:;">'+a+"</a>",c=!0):(b.feedCardEditLabelTip.innerHTML="\u8be5\u6807\u7b7e\u5df2\u6dfb\u52a0!<i></i>",b.feedCardEditLabelTip.style.display="block"):a?(b.feedCardEditLabelTip.innerHTML="\u6dfb\u52a0\u7684\u6807\u7b7e\u8fc7\u957f!<i></i>",b.feedCardEditLabelTip.style.display="block"):(b.feedCardEditLabelTip.innerHTML="\u8bf7\u8f93\u5165\u6807\u7b7e!<i></i>",b.feedCardEditLabelTip.style.display="block");var d=dom.$("feedCardEditCols_-100");if(d&&b.keywords.length>0){dom.addClass(d,"selected"),b.tabInfos["tab_-100"].selected=!0;var e=utils.indexOf(b.selectedLids,-100);0>e&&b.selectedLids.push(-100)}return b.updateHotKeywords(),c},removeKeyword:function(a){var b=this;a=utils.safeStr(utils.trim(a));var c=utils.indexOf(b.keywords,a);if(c>=0&&b.keywords.splice(c,1),0==b.keywords.length){var d=dom.$("feedCardEditCols_-100");if(d){dom.removeClass(d,"selected"),b.tabInfos["tab_-100"].selected=!1;var c=utils.indexOf(b.selectedLids,-100);c>=0&&b.selectedLids.splice(c,1)}}b.updateHotKeywords(),b.createKeywordsHTML()},dealTabInfos:function(){for(var a=this,b=0,c=a.allTabs.length;c>b;b++){var d=a.tabInfos["tab_"+a.allTabs[b]];d&&(d.selected=!1,utils.indexOf(a.tabs,d.lid)>=0&&(d.selected=!0))}},createTabHTML:function(){for(var a=this,b=[],c=0,d=a.allTabs.length;d>c;c++){var e=a.tabInfos["tab_"+a.allTabs[c]];e&&(e.selected?b.push('<a href="javascript:;" id="feedCardEditCols_'+e.lid+'" data-lid="'+e.lid+'" class="selected">'+e.txt+"</a>"):b.push('<a href="javascript:;" id="feedCardEditCols_'+e.lid+'" data-lid="'+e.lid+'">'+e.txt+"</a>"))}a.feedCardEditCols.innerHTML=b.join("")},createKeywordsHTML:function(){var a=this;if(a.supportKeywords){for(var b=[],c=0;c<a.keywords.length;c++)b.push('<a href="javascript:;">'+a.keywords[c]+"</a>");a.feedCardEditSelectLabels.innerHTML=b.join("")}},adjustEditorHeight:function(){var a=this,b=a.feedCardTabEditor.offsetHeight,c=utils.viewData().viewHeight,d=(win.FEED_CARD_INFO.fixedTop||0)+(win.FEED_CARD_INFO.tabHeight||0);b>c-d?(a.feedCardTabEditor.style.height=c-d+"px",a.feedCardTabEditor.style.overflowY="scroll"):(a.feedCardTabEditor.style.height="",a.feedCardTabEditor.style.overflowY="")},updateHotKeywords:function(){var a=this;if(a.supportKeywords)for(var b=a.feedCardEditHotLabels.getElementsByTagName("a"),c=0;c<b.length;c++)utils.indexOf(a.keywords,b[c].innerHTML)>=0?dom.addClass(b[c],"selected"):dom.removeClass(b[c],"selected")},goToStep1:function(){var a=this;if(a.feedCardEditDone.style.display="none",a.feedCardEditPrev.style.display="none",a.feedCardEditNext.style.display="",a.feedCardEditStep1.style.display="block",a.feedCardEditStep2.style.display="none",a.feedCardEditTip.innerHTML=a.editTips[0],a.supportKeywords){a.updateHotKeywords(),a.feedCardEditLabelTip.style.display="none";var b=utils.indexOf(a.selectedLids,-100);b>=0?a.feedCardTabEditLabelC.style.display="block":a.feedCardTabEditLabelC.style.display="none"}win.setTimeout(function(){a.adjustEditorHeight()},100)},goToStep2:function(){var a=this;a.feedCardEditDone.style.display="",a.feedCardEditPrev.style.display="",a.feedCardEditNext.style.display="none",a.feedCardEditStep1.style.display="none",a.feedCardEditTip.innerHTML=a.editTips[1];for(var b=[],c=0,d=a.selectedLids.length;d>c;c++){var e=a.tabInfos["tab_"+a.selectedLids[c]];e&&b.push('<a href="javascript:;" data-lid="'+e.lid+'" data-index="'+c+'">'+e.txt+"</a>")}var f="key=index_feed&value=setting_btn_save:";f+=a.selectedLids.join(":"),a.tabInfos["tab_-100"]&&a.tabInfos["tab_-100"].selected&&(f+="_"+win.encodeURIComponent(a.keywords.join(":"))),a.feedCardEditDone.setAttribute("suda-uatrack",f),a.feedCardEditSelectW.innerHTML=b.join(""),a.feedCardEditStep2.style.display="block",win.setTimeout(function(){a.adjustEditorHeight()},100)},onEditDone:function(){var a=this;a.tabs=a.selectedLids,a.hide(),a.onEditDoneCallback&&a.onEditDoneCallback(a.tabs,a.keywords)},show:function(a,b){var c=this;c.container.setAttribute("data-sudaclick","posi-setting"),c.tabs=a,c.keywords=b,c.dealTabInfos(),c.createTabHTML(),c.selectedLids=[],Array.prototype.push.apply(c.selectedLids,a),c.createKeywordsHTML(),c.container.style.display="block",c.goToStep1(),c.adjustEditorHeightInterval=win.setInterval(function(){c.adjustEditorHeight()},300)},hide:function(){var a=this;win.clearInterval(a.adjustEditorHeightInterval),a.container.style.display="none"}},a}(),coverLayer={divObj:null,_coverTime:null,_coverRe:function(){this.wid||this.hei||(document.body.offsetHeight<document.documentElement.clientHeight?(this.divObj.style.width=document.body.clientWidth+"px",this.divObj.style.height=document.documentElement.clientHeight+"px"):(this.divObj.style.width=document.body.clientWidth+"px",this.divObj.style.height=document.body.clientHeight+"px"))},isIE:-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,on:function(a,b,c,d){if(this.wid=a,this.hei=b,this.x=c,this.y=d,null==this.divObj){if(this.divObj=document.createElement("div"),this.divObj.className="cover",this.divObj.style.zIndex=1e4,this.divObj.style.left="0px",this.divObj.style.top="0px",this.divObj.style.overflow="hidden",this.divObj.style.position="absolute",this.divObj.style.backgroundColor="#000",this.isIE){var e=document.createElement("iframe");e.style.filter="Alpha(Opacity=0)",e.frameBorder=0,e.scrolling="no",e.style.width="100%",e.style.height="100%",this.divObj.appendChild(e),this.divObj.style.filter="Alpha(Opacity=70)",this.divObj.style.opacity=.7}else this.divObj.style.opacity=.7;document.body.appendChild(this.divObj)}this.divObj.style.width=this.divObj.style.height="100%",this.divObj.style.left=this.divObj.style.top="0px",a&&(this.divObj.style.width=a+"px"),b&&(this.divObj.style.height=b+"px"),c&&(this.divObj.style.left=c+"px"),d&&(this.divObj.style.top=d+"px"),a||b||(document.body.offsetHeight<document.documentElement.clientHeight?(this.divObj.style.width=document.body.clientWidth+"px",this.divObj.style.height=document.documentElement.clientHeight+"px"):(this.divObj.style.width=document.body.clientWidth+"px",this.divObj.style.height=document.body.clientHeight+"px")),this.divObj.style.display="block",clearInterval(this._coverTime),this._coverTime=setInterval(function(){coverLayer._coverRe()},50)},off:function(){this.divObj&&(this.divObj.style.display="none"),clearInterval(this._coverTime)}},Toast=function(){var a=['<div class="feed-card-toast-c feed-card-clearfix">'];a.push('<div class="feed-card-toast-icon<%= it.state %>"></div>'),a.push('<div class="feed-card-toast-tip"><%= it.tip %></div>'),a.push("</div>"),a.push('<div class="feed-card-toast-action">'),a.push('<a href="javascript:;" id="feedCardToastCloseBtn1"><%= it.btnTxt %></a>'),a.push("</div>"),a.push('<div class="feed-card-toast-close">'),a.push('<a href="javascript:;" id="feedCardToastCloseBtn2">close</a>'),a.push("</div>");var b=function(b){var c=this;c.showingDuration=b.showingDuration,c.htmlGenerator=doT.template(a.join(""),templateSettings)};return b.prototype={show:function(a){var b=this;b.onClose=a.onClose,coverLayer.on();var c=document.createElement("div");c.className="feed-card-toast",b.contentDiv=c;var d=utils.viewData();c.style.top=d.scrollTop+d.viewHeight/2-100+"px",b.contentDiv.innerHTML=b.htmlGenerator(a),doc.body.appendChild(b.contentDiv),b._bindEvent()},_bindEvent:function(){var a=this;a.timeout=win.setTimeout(function(){a._hide(0)},a.showingDuration),dom.addEvent(dom.$("feedCardToastCloseBtn2"),"click",function(b){a._hide(2),dom.preventDefault(b)}),dom.addEvent(dom.$("feedCardToastCloseBtn1"),"click",function(b){a._hide(1),dom.preventDefault(b)})},_hide:function(a){var b=this;coverLayer.off(),doc.body.removeChild(b.contentDiv),b.contentDiv=null,b.timeout&&(win.clearTimeout(b.timeout),b.timeout=null),b.onClose&&b.onClose(a)}},b}(),LabelEditor=function(a){this.tab=a,this.feedCardTagTip=dom.$("feedCardTagTip"),this.feedCardTagTipLabel=dom.$("feedCardTagTipLabel"),this.feedCardSelectTag=dom.$("feedCardSelectTag"),this.feedCardSelectTagLabels=dom.$("feedCardSelectTagLabels"),this.feedCardSelectTagTip=dom.$("feedCardSelectTagTip"),this.feedCardSelectTagDone=dom.$("feedCardSelectTagDone"),this.feedCardSelectWillTag=dom.$("feedCardSelectWillTag"),this._bindEvent()};LabelEditor.prototype={_bindEvent:function(){var a=this;dom.addEvent(dom.$("feedCardTagTipAdd"),"click",function(b){a._add(),dom.preventDefault(b)}),dom.addEvent(dom.$("feedCardTagTipClose"),"click",function(b){a._hideTip(),dom.preventDefault(b)}),dom.addEvent(a.feedCardSelectTagLabels,"click",function(b){var c=dom.getTarget(b);"A"==c.tagName.toUpperCase()&&(c.innerHTML!=a.toAddLabel&&c.parentNode.removeChild(c),a.feedCardSelectTagTip.innerHTML="<span>\u6e29\u99a8\u63d0\u793a:</span>\u60a8\u8ba2\u9605\u7684\u6807\u7b7e\u572815\u4e2a\u4ee5\u5185\uff0c\u8bf7\u70b9\u51fb\u201c\u5b8c\u6210\u201d\u4fdd\u5b58\u3002"),dom.preventDefault(b)}),dom.addEvent(dom.$("feedCardSelectTagClose"),"click",function(b){a.toAddLabel=null,a.feedCardSelectTag.style.display="none",dom.preventDefault(b)}),dom.addEvent(a.feedCardSelectTagDone,"click",function(b){dom.getTarget(b);if(a.feedCardSelectTagLabels.childNodes.length<15){var c=[];c.push(a.toAddLabel);for(var d=0;d<a.feedCardSelectTagLabels.childNodes.length;d++)c.push(a.feedCardSelectTagLabels.childNodes[d].innerHTML);a.tab.showLabel(a.toAddLabel,c,!0,!0),a.toAddLabel=null,a.feedCardSelectTag.style.display="none"}else dom.addClass(a.feedCardSelectTagTip,"error"),win.setTimeout(function(){dom.removeClass(a.feedCardSelectTagTip,"error")},2e3);dom.preventDefault(b)})},_add:function(){this.tab.isLogin&&(this.tab.isLogin()?this.tab.keywords.length>=15?(this._hideTip(),this.feedCardSelectWillTag.innerHTML=this.toAddLabel,this._selectLabels()):(this._hideTip(),this.tab.keywords.splice(0,0,this.toAddLabel),this.tab.showLabel(this.toAddLabel,this.tab.keywords,!0,!0),this.toAddLabel=null):this.tab.requireLogin("<span>\u6e29\u99a8\u63d0\u793a: </span>\u8bf7\u767b\u5f55\u4ee5\u4fdd\u5b58\u8ba2\u9605\u5185\u5bb9"))},onLoginSuccess:function(){this.toAddLabel&&(this.tab.keywords.length>=15?(this._hideTip(),this.feedCardSelectWillTag.innerHTML=this.toAddLabel,this._selectLabels()):(this._hideTip(),this.tab.keywords.splice(0,0,this.toAddLabel),this.tab.showLabel(this.toAddLabel,this.tab.keywords,!0,!0)))},onLoginCancel:function(){},_selectLabels:function(){this.feedCardSelectTagTip.innerHTML="<span>\u6e29\u99a8\u63d0\u793a:</span>\u4f60\u8ba2\u9605\u7684\u6807\u7b7e\u591a\u4e8e15\u4e2a\uff0c\u8bf7\u5220\u9664\u90e8\u5206\u6807\u7b7e\u5b8c\u6210\u6dfb\u52a0\u3002";for(var a=[],b=0;b<this.tab.keywords.length;b++)a.push('<a href="javascript:;">'+this.tab.keywords[b]+"</a>");this.feedCardSelectTagLabels.innerHTML=a.join(""),this.feedCardSelectTag.style.display="block"},_hideTip:function(){this.feedCardTagTip.style.display="none"},_showTip:function(a){this.feedCardTagTipLabel.innerHTML=a,this.feedCardTagTip.style.display="block"},addLabel:function(a){this.toAddLabel=a,this._showTip(a)}};var COLUMN_EDITOR_ACTION="http://user.mix.sina.com.cn/subscribe/api/subscribe/replace",Tab=function(){var a=658;win.FEED_CARD_INFO.containerWidth&&(a=win.FEED_CARD_INFO.containerWidth-2);var b=10,c=115,d=73,e=function(d){var e=this;utils.fillOptionsWithDefault(e,d,{fixedTop:0}),e.columnEditorForm=dom.$("columnEditorForm"),e.columnEditorFormHTML=e.columnEditorForm.innerHTML,e.container=dom.$(e.containerID),e.htmlGenerator=doT.template(tabTemplate,templateSettings),e.centerWidth=e.supportTabEdit?a-e.firstTab.css_width-c:a-e.firstTab.css_width,e.centerWidth-=2*b,e.createHTML(),e.fillHTML(),e.labelEditor=new LabelEditor(e),e.feedCardLabels=dom.$("feedCardLabels"),e.feedCardLabelsC=dom.$("feedCardLabelsC"),e.feedCardLabelsToggle=dom.$("feedCardLabelsToggle"),e.bindEvent(),d.containerID="feedCardContent",e.loader=new FeedCard(d),e.editor=new ColumnEditor({containerID:"feedCardTabEditor",tabs:e.tabs,allTabs:e.allTabs,tabInfos:e.tabInfos,supportKeywords:e.supportKeywords,maxKeywordsCount:e.maxKeywordsCount,maxKeywordLength:e.maxKeywordLength||10,hotKeywords:e.hotKeywords,editTips:e.editTips,onEditDoneCallback:function(a,b){e.tabs=a,e.keywords=b,e.setTabs(e.tabs),e.setKeywords(e.keywords),e.cancelSettings(),e.showTab(e.feedCardTabFirstTab),e.uploadData(!0),utils.isFunction(e.isLogin)&&(e.isLogin()||utils.isFunction(e.requireLogin)&&(e.shouldUploadData=!0,e.requireLogin("<span>\u6e29\u99a8\u63d0\u793a: </span>\u60a8\u5df2\u7ecf\u5b8c\u6210\u5174\u8da3\u8bbe\u7f6e\uff0c\u5efa\u8bae\u767b\u5f55\u540e\u4fdd\u5b58\u3002")))}}),e.loader.setLidAndLoad(e.firstTab.lid)};return e.prototype={_uaTrack:function(a,b){win.SUDA&&win.SUDA.uaTrack&&win.SUDA.uaTrack(a,b)},onLogout:function(){this.fillHTML()},onLoginCancel:function(){var a=this;a.shouldUploadData&&(a.shouldUploadData=!1,a.uploadData()),a.labelEditor.onLoginCancel()},onLoginSuccess:function(a){var b=this;b.uid=a,b.supportTabEdit&&(b.shouldUploadData&&(b.shouldUploadData=!1,b.uploadData()),b.getSubData())},uploadData:function(a){var b=this;a?win.SINAFEEDCARD_COLUMNS_EDIT_DONE.hideToast=!0:win.SINAFEEDCARD_COLUMNS_EDIT_DONE.hideToast=!1,b.columnEditorForm.action=COLUMN_EDITOR_ACTION+"?callback=SINAFEEDCARD_COLUMNS_EDIT_DONE1",b.columnEditorForm.innerHTML=b.columnEditorFormHTML+b.generateFormHTML(b.tabs,b.subCateID),b.columnEditorForm.submit()},uploadKeywords:function(){this.columnEditorForm.action=COLUMN_EDITOR_ACTION+"?callback=SINAFEEDCARD_COLUMNS_EDIT_DONE",this.columnEditorForm.innerHTML=this.columnEditorFormHTML+this.generateFormHTML(this.keywords,this.subTagID),this.columnEditorForm.submit()},generateFormHTML:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push('<input type="hidden" name="data['+d+'][c]" value="'+a[d]+'" />'),c.push('<input type="hidden" name="data['+d+'][w]" value="'+d+'" />');return c.push('<input type="hidden" name="project_id" value="'+b+'" />'),c.join("")},getSubData:function(){var a=this;userData.getUserDataFromNet(a.subCateID,a.subTagID,function(b){var c=win.FEED_CARD_INFO.tabs||[],d=win.FEED_CARD_INFO.keywords||[];b?(b.lids&&b.lids.length?(a._uaTrack("index_feed","issetting"),a.tabs=b.lids,a.setTabs(b.lids)):(a._uaTrack("index_feed","nosetting"),a.setTabs(c)),b.keywords&&b.keywords.length?(a.keywords=a.keywords,a.setKeywords(b.keywords)):a.setKeywords(d)):(a._uaTrack("index_feed","nosetting"),a.setTabs(c),a.setKeywords(d)),a.labelEditor.onLoginSuccess()})},createHTML:function(){var a=this;utils.isTouch&&dom.addClass(a.container,"feed-card-ipad"),a.container.innerHTML=a.htmlGenerator(a.firstTab),a.feedCardTab=dom.$("feedCardTab"),a.feedCardTabFirstTab=dom.$("feedCardTabFirstTab"),a.feedCardConfigurableTabs=dom.$("feedCardConfigurableTabs"),a.feedCardSettingsTrigger=dom.$("feedCardSettingsTrigger"),a.feedCardMoreTabsTrigger=dom.$("feedCardMoreTabsTrigger"),a.feedCardMoreTabs=dom.$("feedCardMoreTabs"),a.feedCardTabFirstTab=dom.$("feedCardTabFirstTab"),a.currentTab=a.feedCardTabFirstTab,a.feedCardConfigurableTabs.parentNode.style.width=a.centerWidth+"px",a.feedCardMoreTabs.style.right=(a.supportTabEdit?c:0)+"px",a.feedCardTabToast=dom.$("feedCardTabToast"),a.feedCardTabToastC=dom.$("feedCardTabToastC")},fillHTML:function(){var a=this;if(a.supportTabEdit)a.getSubData();else{a._uaTrack("index_feed","nosetting");var b=win.FEED_CARD_INFO.tabs||[],c=win.FEED_CARD_INFO.keywords||[];a.setTabs(b),a.setKeywords(c)}},bindEvent:function(){var a=this;if(a.supportTabEdit?dom.addEvent(a.feedCardSettingsTrigger,"click",function(b){dom.hasClass(a.feedCardSettingsTrigger,"feed-card-tab-tabi-selected")?a.cancelSettings():a.openSettings()}):a.feedCardSettingsTrigger.parentNode.style.display="none",dom.addEvent(doc,"click",function(b){dom.hasClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open")&&(dom.removeClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open"),a.feedCardMoreTabs.style.display="none")}),dom.addEvent(a.feedCardMoreTabsTrigger,"click",function(b){dom.hasClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open")?(dom.removeClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open"),a.feedCardMoreTabs.style.display="none"):(dom.addClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open"),a.feedCardMoreTabs.style.display="block"),dom.stopPropagation(b)}),dom.addEvent(a.feedCardMoreTabs,"click",function(b){var c=dom.getTarget(b);a.cancelSettings();var d=a.resortTabs(win.parseInt(c.getAttribute("data-lid"),10));a.showTabByIndex(d),a.feedCardMoreTabs.style.display="none",dom.removeClass(a.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open")}),dom.addEvent(a.feedCardConfigurableTabs,"click",function(b){var c=dom.getTarget(b);a.cancelSettings(),a.showTab(c)}),dom.addEvent(a.feedCardTabFirstTab,"click",function(b){var c=dom.getTarget(b);a.cancelSettings(),a.showTab(c)}),dom.addEvent(a.feedCardLabelsToggle,"click",function(b){dom.hasClass(a.feedCardLabelsToggle,"feed-card-tab-labels-toggle-open")?a.closeLabelToggle():a.openLabelToggle(),dom.preventDefault(b)}),dom.addEvent(a.feedCardLabelsC,"click",function(b){var c=dom.getTarget(b);if("A"==c.tagName.toUpperCase()){for(var d=0;d<a.feedCardLabelsC.childNodes.length;d++)dom.removeClass(a.feedCardLabelsC.childNodes[d],"active");dom.addClass(c,"active"),c==a.feedCardLabelsC.firstChild?(a.currentKeyword=null,a.loader.setKeywordsAndLoad(a.keywords)):(a.currentKeyword=c.innerHTML,a.loader.setKeywordsAndLoad([a.currentKeyword],1))}dom.preventDefault(b)}),a.isTabFixed&&6!=utils.browser.ie){var b=null,c=0;"auto"!=a.yPosition&&(c=utils.getPosition(a.container).y),dom.addEvent(win,"scroll",function(){b&&win.clearTimeout(b),b=win.setTimeout(function(){var b=utils.viewData(),d=0;if("auto"===a.yPosition){var e=utils.getPosition(a.container).y;d=e>0?e:c}else d=a.yPosition;b.scrollTop+a.fixedTop>d?(a.fixedTop>0&&(a.feedCardTab.style.top=a.fixedTop+"px"),dom.addClass(a.container,"feed-card-fixed")):(dom.removeClass(a.container,"feed-card-fixed"),a.feedCardTab.style.top="")},10)})}},closeLabelToggle:function(){
this.feedCardLabelsC.style.height="30px",dom.removeClass(this.feedCardLabelsToggle,"feed-card-tab-labels-toggle-open"),this.feedCardLabelsToggle.innerHTML="\u5c55\u5f00"},openLabelToggle:function(){this.feedCardLabelsC.style.height="auto",dom.addClass(this.feedCardLabelsToggle,"feed-card-tab-labels-toggle-open"),this.feedCardLabelsToggle.innerHTML="\u6536\u8d77"},showTab:function(a){var b=this;if(b.currentTab!=a&&"DIV"!==a.tagName.toUpperCase()){var c=win.parseInt(a.getAttribute("data-lid"),10);if(b.supportKeywords&&-100==c)return dom.removeClass(b.currentTab,"feed-card-tab-tabi-selected"),b.currentTab=a,dom.addClass(b.currentTab,"feed-card-tab-tabi-selected"),b.currentKeyword?(b.loader.setKeywordsAndLoad([b.currentKeyword],1),b.renderLabels(b.currentKeyword,b.keywords)):(b.loader.setKeywordsAndLoad(b.keywords),b.renderLabels("\u5168\u90e8",b.keywords)),b.scrollToTabPosition(),void(b.feedCardLabels.style.display="block");-102!=c&&(b.labelEditor.toAddLabel=null,b.labelEditor._hideTip()),b.feedCardLabels.style.display="none",b.scrollToTabPosition(),dom.removeClass(b.currentTab,"feed-card-tab-tabi-selected"),b.currentTab=a,dom.addClass(b.currentTab,"feed-card-tab-tabi-selected"),-102==c?b.loader.setKeywordsAndLoad([b.tabInfos["tab_-102"].txt],1):b.loader.setLidAndLoad(win.parseInt(b.currentTab.getAttribute("data-lid"),10)),dom.removeClass(b.feedCardMoreTabsTrigger,"feed-card-tab-more-trigger-open"),b.feedCardMoreTabs.style.display="none"}},scrollToTabPosition:function(a){var b=this,c=0;c="auto"===b.yPosition?utils.getPosition(b.container).y:b.yPosition;var d=utils.viewData();if(d.scrollTop>c||a){var e;e=utils.isFunction(b.deltaYPosition)?b.deltaYPosition():b.deltaYPosition,win.scrollTo(0,c+(e||0))}},addTagToTab:function(a){for(var c=this,d=0;d<c.tabs.length;d++){var e=c.tabInfos["tab_"+c.tabs[d]];if(e.txt==a){if(d<c._tabRenderLength)c.showTabByIndex(d);else{var f=c.resortTabs(e.lid);c.showTabByIndex(f)}return}}for(var g in c.tabInfos){var e=c.tabInfos[g];if(e&&e.txt==a&&-102!=e.lid){c.tabs.push(e.lid);var f=c.resortTabs(e.lid);return c.showTabByIndex(f),void c.uploadData(!0)}}var h=utils.indexOf(c.keywords,a);if(h>=0)c.showLabel(a,c.keywords,!1,!1);else{c.labelEditor.addLabel(a);var i=utils.cn_size(a,!0),j=10*i+2*b;c.tabInfos["tab_-102"]={txt:a,lid:-102,css_width:j-2*b},utils.indexOf(this.tabs,-102)<0&&c.tabs.push(-102);var f=c.resortTabs(-102);c.showTabByIndex(f)}},showLabel:function(a,b,c,d){this.keywords=b,utils.indexOf(this.tabs,-100)<0&&this.tabs.push(-100);var e=utils.indexOf(this.tabs,-102);e>=0&&this.tabs.splice(e,1);var f=this.resortTabs(-100);this.currentKeyword=a,this.showTabByIndex(f),d&&(dom.$("feedCardNotification2").innerHTML="\u4f60\u5df2\u6210\u529f\u8ba2\u9605\u201c"+a+"\u201d\uff0c\u53ef\u4ee5\u5f00\u59cb\u9605\u8bfb\u5566\u3002",dom.$("feedCardNotification2").style.display="block",setTimeout(function(){dom.$("feedCardNotification2").style.display="none"},2e3)),c&&this.uploadData(!0)},renderLabels:function(a,b){var c=[];if("\u5168\u90e8"==a)c.push('<a href="javascript:;" class="active" style="border-left:none;">\u5168\u90e8</a>');else{c.push('<a href="javascript:;" style="border-left:none;">\u5168\u90e8</a>');var d=utils.indexOf(b,a);d>=0&&(b.splice(d,1),b.splice(0,0,a))}for(var e=0;e<b.length;e++)a==b[e]?c.push('<a href="javascript:;" class="active">'+b[e]+"</a>"):c.push('<a href="javascript:;">'+b[e]+"</a>");this.feedCardLabelsC.innerHTML=c.join(""),this.feedCardLabels.style.display="block";var f=this;f.feedCardLabelsC.style.height="auto",setTimeout(function(){f.feedCardLabelsC.offsetHeight>30?(f.feedCardLabelsToggle.style.display="inline",f.closeLabelToggle()):f.feedCardLabelsToggle.style.display="none"},100)},resortTabs:function(a){for(var c=this,e=d+c.tabInfos["tab_"+a].css_width+2*b,f=0,g=0;g<c.tabs.length;g++){var h=c.tabInfos["tab_"+c.tabs[g]];if(c.tabs[g]!=a){if(e+=h.css_width+2*b,e>c.centerWidth)break;f++}}var i=utils.indexOf(c.tabs,a);return c.tabs.splice(i,1),c.tabs.splice(f,0,a),c.renderTabs(f+1),f},showTabByIndex:function(a){var b=this.feedCardConfigurableTabs.getElementsByTagName("span")[a];this.showTab(b)},setTabs:function(a){for(var c=this,e=[],f=0,g=0;g<a.length;g++){var h=c.tabInfos["tab_"+a[g]];h&&(e.push(h.lid),f+=h.css_width+2*b)}var i=e.length;if(f>c.centerWidth){f=d;for(var g=0;g<e.length;g++){var h=c.tabInfos["tab_"+e[g]];if(f+=h.css_width+2*b,f>c.centerWidth){i=g;break}}}c.tabs=e,c.renderTabs(i)},renderTabs:function(a){var b=this,c=[];b._tabRenderLength=a;for(var d=0;a>d;d++){var e=b.tabInfos["tab_"+b.tabs[d]];-100==e.lid?c.push('<span class="feed-card-tab-tabi feed-card-tab-tabi2" id="feedCardLabelsTrigger" data-lid="'+e.lid+'" style="width:'+e.css_width+'px;" suda-uatrack="key=index_feed&value=cate_float:'+e.lid+'">'+e.txt+"<i></i></span>"):-101==e.lid?c.push('<span class="feed-card-tab-tabi" data-lid="'+e.lid+'" style="width:'+e.css_width+'px;" suda-uatrack="key=index_feed&value=cate_float:'+e.lid+'"><i class="feed-card-guessLikeIcon"></i>'+e.txt+"</span>"):c.push('<span class="feed-card-tab-tabi" data-lid="'+e.lid+'" style="width:'+e.css_width+'px;" suda-uatrack="key=index_feed&value=cate_float:'+e.lid+'">'+e.txt+"</span>")}b.feedCardConfigurableTabs.innerHTML=c.join("");for(var f=[],g=a;g<b.tabs.length;g++){var e=b.tabInfos["tab_"+b.tabs[g]];-100==e.lid?f.push('<span class="feed-card-tab-tabi feed-card-tab-tabi2" id="feedCardLabelsTrigger" data-lid="'+e.lid+'" suda-uatrack="key=index_feed&value=cate_float:'+e.lid+'">'+e.txt+"<i></i></span>"):f.push('<span class="feed-card-tab-tabi" data-lid="'+e.lid+'" suda-uatrack="key=index_feed&value=cate_float:'+e.lid+'">'+e.txt+"</span>")}b.feedCardMoreTabs.innerHTML=f.join(""),b.feedCardMoreTabs.style.display="none",f.length?b.feedCardMoreTabsTrigger.style.display="block":b.feedCardMoreTabsTrigger.style.display="none"},setKeywords:function(a){this.keywords=a,a||(a=[],that.keywords=a)},openSettings:function(){var a=this;a.feedCardSettingsTrigger.innerHTML="\u53d6\u6d88\u8bbe\u7f6e",dom.addClass(a.feedCardSettingsTrigger,"feed-card-tab-tabi-selected"),a.editor.show(a.tabs,a.keywords)},cancelSettings:function(){var a=this;a.feedCardSettingsTrigger.innerHTML="\u5174\u8da3\u8bbe\u7f6e",dom.removeClass(a.feedCardSettingsTrigger,"feed-card-tab-tabi-selected"),a.editor.hide()}},e}();!function(){var a="1.2.8",b=win.FEED_CARD_INFO;b.versionNumber=a;var c=new Tab(b);win.__SinaFeedCard__={onLoginCancel:function(){c.onLoginCancel()},onLoginSuccess:function(a,b){c.onLoginSuccess(a,b)},onLogout:function(){c.onLogout()},showSettings:function(){c.openSettings(),c.scrollToTabPosition(!0)},openSettings:function(){c.openSettings()},playVideo:function(a,b,c){dom.$("videoPlayerC-"+a).style.display="none",dom.$("videoPlayerV-"+a).style.display="block";var d={url:"",container:"videoPlayerVC-"+a,id:"videoPlayerVC-player-"+a,width:640,height:516,params:{allowNetworking:"all",allowScriptAccess:"always",wmode:"opaque",allowFullScreen:"true",quality:"high"},attributes:{},flashvars:{autoPlay:1,loop:0,autoLoad:1,thumbUrl:"",tj:1,as:1},h5attr:{autoPlay:!1,controls:!0,loop:!1,poster:"",preload:"auto"}},e=function(){var a=playVideo(d);try{a.playVideo({video_id:b,pid:c,title:""})}catch(e){}};window.playVideo?e():IO.jsLoad("http://sjs0.sinajs.cn/video/sinaplayer/js/page/player_v1.js","utf-8",function(){e()})},stopVideo:function(a){var b=dom.$("videoPlayerC-"+a),c=dom.$("videoPlayerV-"+a),d=dom.$("videoPlayerVC-"+a);b&&(b.style.display="block"),c&&(c.style.display="none"),d&&(d.innerHTML="")},addTagToTab:function(a){c.addTagToTab(a)},showComment:function(a,c,d,e,f,g,h,i){var j=a.parentNode.parentNode.parentNode,k=dom.getByAttributeName(j,"data-id","feedCardComment_"+d+"_w","div");if(k&&k.length)if(k=k[0],"block"===k.style.display)k.style.display="none",___sinacMNT___.cmnt.commentTip.hide();else{if(k.style.display="block",i){var l=new Image;l.src=i,l.style.display="none",doc.body.appendChild(l)}dom.removeClass(k,"show-close"),g>0&&(dom.getByAttributeName(j,"data-id","feedCardCommentTop_"+d,"div")[0].style.right=62+5*g.length+"px",win.setTimeout(function(){dom.addClass(k,"show-close")},1e3));var m=new ___sinacMNT___.cmnt.FormList(dom.getByAttributeName(j,"data-id","feedCardComment_"+d+"_c","div")[0],{channel:c,newsid:d,parent:"",encoding:b.pageCommentEncoding||"gbk"},{channel:c,newsid:d,group:e,encoding:b.pageCommentEncoding||"gbk",page:1,pageSize:20,showReply:void 0===b.pageCommentShowReply?0:b.pageCommentShowReply,maxWordCount:b.pageCommentMaxWordCount||140,hotPageNum:b.pageCommentHotPageNum||3,firstPageNum:b.pageCommentFirstPageNum||10,clickMoreTimes:0,loaded:function(b){var c=win.parseInt(b.data.count.total,10);c>0?a.innerHTML="\u8bc4\u8bba("+c+")":a.innerHTML="\u8bc4\u8bba"}},{});m.setFormOpt("share_url",h);var n=m.commentForms[0].get("dom.cont");win.setTimeout(function(){n.focus()},10)}},hideComment:function(a,b){var c=a.parentNode.parentNode,d=dom.getByAttributeName(c,"data-id","feedCardComment_"+b+"_w","div");if(d&&d.length){d=d[0];var e=utils.getPosition(d);e&&e.y&&win.scrollTo(0,e.y-250),d.style.display="none",___sinacMNT___.cmnt.commentTip.hide()}},hideGuessLike:function(){storage.setItem("feed_rendered_guessLikeTip","1");try{dom.addClass(dom.$("feedCardGuessTips"),"feed-card-guessTips-hide")}catch(a){}}},win.SINAFEEDCARD_COLUMNS_EDIT_DONE1=function(a){c.uploadKeywords()},win.SINAFEEDCARD_COLUMNS_EDIT_DONE=function(a){if(!SINAFEEDCARD_COLUMNS_EDIT_DONE.hideToast){var b=win.FEED_CARD_INFO.editToastTimeout||3e3,d=win.FEED_CARD_INFO.editSuccessToast||"\u60a8\u7684\u5174\u8da3\u8bbe\u7f6e\u5df2\u7ecf\u4fdd\u5b58\u6210\u529f!",e=win.FEED_CARD_INFO.editFailToast||"\u60a8\u7684\u5174\u8da3\u8bbe\u7f6e\u4fdd\u5b58\u5931\u8d25!",f=win.FEED_CARD_INFO.editToastOKBtnTxt||"\u5f00\u59cb\u6d4f\u89c8",g=win.FEED_CARD_INFO.editToastOKNBtnTxt||"\u8fd4\u56de\u4fee\u6539",h=new Toast({showingDuration:b});a&&a.result&&a.result.status&&0==a.result.status.code?h.show({tip:d,btnTxt:f,state:0}):h.show({tip:e,btnTxt:g,state:1,onClose:function(a){1==a&&c.openSettings()}})}}}()}(document,window);
//# sourceMappingURL=feed.map